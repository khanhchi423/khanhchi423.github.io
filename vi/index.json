[
{
	"uri": "/vi/2-prerequiste/2.1-install-nodejs/",
	"title": "C√†i ƒë·∫∑t Node.js &amp; npm",
	"tags": [],
	"description": "",
	"content": "T·∫£i Node.js \u0026amp; npm Truy c·∫≠p trang ch·ªß Node.js v√† ch·ªçn phi√™n b·∫£n LTS ƒë·ªÉ t·∫£i v·ªÅ, t∆∞∆°ng th√≠ch v·ªõi h·ªá ƒëi·ªÅu h√†nh c·ªßa b·∫°n (Windows, macOS, Linux).\nCh·∫°y t·ªáp c√†i ƒë·∫∑t v·ª´a t·∫£i v√† l√†m theo h∆∞·ªõng d·∫´n ƒë·ªÉ c√†i ƒë·∫∑t Node.js.\nSau khi c√†i ƒë·∫∑t ho√†n t·∫•t, m·ªü Terminal v√† ki·ªÉm tra phi√™n b·∫£n Node.js v√† npm b·∫±ng l·ªánh sau:\nnode -v npm -v N·∫øu xu·∫•t hi·ªán k·∫øt qu·∫£ nh∆∞ h√¨nh d∆∞·ªõi ƒë√¢y, ƒëi·ªÅu ƒë√≥ c√≥ nghƒ©a l√† b·∫°n ƒë√£ c√†i ƒë·∫∑t th√†nh c√¥ng.\n"
},
{
	"uri": "/vi/1-introduce/",
	"title": "Gi∆°ÃÅi thi√™Ã£u",
	"tags": [],
	"description": "",
	"content": "üéØ M√¥ h√¨nh Event Sourcing l√† m·ªôt m√¥ h√¨nh ki·∫øn tr√∫c trong thi·∫øt k·∫ø h·ªá th·ªëng ph√¢n t√°n, l∆∞u tr·ªØ t·∫•t c·∫£ c√°c thay ƒë·ªïi tr·∫°ng th√°i ·ª©ng d·ª•ng d∆∞·ªõi d·∫°ng chu·ªói c√°c s·ª± ki·ªán b·∫•t bi·∫øn (immutable events), thay v√¨ ch·ªâ l∆∞u tr·∫°ng th√°i hi·ªán t·∫°i. C√°ch ti·∫øp c·∫≠n n√†y cung c·∫•p kh·∫£ nƒÉng theo d√µi v√† ki·ªÉm tra to√†n b·ªô l·ªãch s·ª≠ thay ƒë·ªïi m√† kh√¥ng c·∫ßn c·∫≠p nh·∫≠t hay x√≥a d·ªØ li·ªáu truy·ªÅn th·ªëng trong c∆° s·ªü d·ªØ li·ªáu. Event Sourcing gi√∫p d·ªÖ d√†ng tu√¢n th·ªß c√°c y√™u c·∫ßu quy ƒë·ªãnh ph√°p l√Ω ƒë√≤i h·ªèi l·ªãch s·ª≠ ki·ªÉm to√°n ƒë·∫ßy ƒë·ªß, qu·∫£n l√Ω d·ªØ li·ªáu nghi√™m ng·∫∑t, v√† c√°c ho·∫°t ƒë·ªông nghi·ªáp v·ª• ho√†n to√†n c√≥ th·ªÉ truy v·∫øt qua c√°c b·∫£n ghi s·ª± ki·ªán chi ti·∫øt, ƒë·ªìng th·ªùi cung c·∫•p cho nh√† ph√°t tri·ªÉn kh·∫£ nƒÉng t√°i t·∫°o tr·∫°ng th√°i hi·ªán t·∫°i v√† x·ª≠ l√Ω s·ª± ki·ªán theo th·ªùi gian th·ª±c trong c√°c ·ª©ng d·ª•ng hi·ªán ƒë·∫°i.\nNguy√™n t·∫Øc c·ªët l√µi:\nS·ª± ki·ªán b·∫•t bi·∫øn: M·ªói thay ƒë·ªïi ƒë∆∞·ª£c ghi nh·∫≠n d∆∞·ªõi d·∫°ng s·ª± ki·ªán kh√¥ng th·ªÉ thay ƒë·ªïi L∆∞u tr·ªØ ch·ªâ th√™m m·ªõi: C√°c s·ª± ki·ªán ch·ªâ ƒë∆∞·ª£c th√™m v√†o, kh√¥ng ƒë∆∞·ª£c c·∫≠p nh·∫≠t hay x√≥a T√°i t·∫°o tr·∫°ng th√°i: Tr·∫°ng th√°i hi·ªán t·∫°i ƒë∆∞·ª£c t√≠nh to√°n l·∫°i b·∫±ng c√°ch ph√°t l·∫°i c√°c s·ª± ki·ªán L·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß: L∆∞u gi·ªØ to√†n b·ªô l·ªãch s·ª≠ thay ƒë·ªïi c·ªßa h·ªá th·ªëng C√°ch ti·∫øp c·∫≠n n√†y ƒë·∫£m b·∫£o t√≠nh minh b·∫°ch, truy xu·∫•t l·ªãch s·ª≠ v√† tu√¢n th·ªß c√°c quy ƒë·ªãnh ph√°p l√Ω y√™u c·∫ßu c√≥ l·ªãch s·ª≠ ki·ªÉm to√°n chi ti·∫øt, ƒë·ªìng th·ªùi cung c·∫•p kh·∫£ nƒÉng t√°i t·∫°o tr·∫°ng th√°i linh ho·∫°t v√† x·ª≠ l√Ω s·ª± ki·ªán theo th·ªùi gian th·ª±c cho c√°c ·ª©ng d·ª•ng hi·ªán ƒë·∫°i.\nüîÄ CQRS (Ph√¢n t√°ch tr√°ch nhi·ªám l·ªánh v√† truy v·∫•n) Event Sourcing th∆∞·ªùng ƒë∆∞·ª£c k·∫øt h·ª£p v·ªõi m√¥ h√¨nh CQRS ƒë·ªÉ t·ªëi ∆∞u hi·ªáu su·∫•t:\nCQRS l√† g√¨?\nL·ªánh (Command): X·ª≠ l√Ω c√°c thao t√°c ghi (T·∫°o, C·∫≠p nh·∫≠t, X√≥a) Truy v·∫•n (Query): X·ª≠ l√Ω c√°c thao t√°c ƒë·ªçc (ƒê·ªçc d·ªØ li·ªáu) Ph√¢n t√°ch tr√°ch nhi·ªám: T√°ch bi·ªát r√µ r√†ng c√°c tr√°ch nhi·ªám ghi v√† ƒë·ªçc L·ª£i √≠ch khi k·∫øt h·ª£p CQRS v·ªõi Event Sourcing:\nT·ªëi ∆∞u ƒë·ªôc l·∫≠p cho ƒë·ªçc v√† ghi: M√¥ h√¨nh ƒë·ªçc v√† ghi c√≥ th·ªÉ ƒë∆∞·ª£c t·ªëi ∆∞u ri√™ng bi·ªát Kh·∫£ nƒÉng m·ªü r·ªông: C√≥ th·ªÉ m·ªü r·ªông ri√™ng r·∫Ω cho c√°c thao t√°c ƒë·ªçc v√† ghi Linh ho·∫°t: C√≥ th·ªÉ x√¢y d·ª±ng nhi·ªÅu m√¥ h√¨nh ƒë·ªçc kh√°c nhau t·ª´ c√πng m·ªôt kho s·ª± ki·ªán Hi·ªáu nƒÉng: C√°c truy v·∫•n ƒë∆∞·ª£c t·ªëi ∆∞u ri√™ng cho t·ª´ng tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng So s√°nh Event Sourcing v√† CRUD Kh√≠a c·∫°nh CRUD Event Sourcing L∆∞u tr·ªØ d·ªØ li·ªáu L∆∞u tr·∫°ng th√°i hi·ªán t·∫°i L∆∞u chu·ªói c√°c s·ª± ki·ªán M·∫•t d·ªØ li·ªáu M·∫•t l·ªãch s·ª≠ khi c·∫≠p nh·∫≠t Gi·ªØ nguy√™n l·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß L·ªãch s·ª≠ ki·ªÉm to√°n C·∫ßn c√†i ƒë·∫∑t ri√™ng T·ª± ƒë·ªông c√≥ s·∫µn ƒê·ªô ph·ª©c t·∫°p ƒê∆°n gi·∫£n Ph·ª©c t·∫°p h∆°n Hi·ªáu su·∫•t ƒë·ªçc Nhanh v·ªõi c√°c truy v·∫•n ƒë∆°n gi·∫£n R·∫•t t·ªëi ∆∞u v·ªõi c√°c m√¥ h√¨nh ƒë·ªçc Hi·ªáu su·∫•t ghi C√≥ th·ªÉ tr·ªü th√†nh n√∫t th·∫Øt c·ªï chai Ghi ch·ªâ th√™m m·ªõi, nhanh h∆°n Kh·∫£ nƒÉng m·ªü r·ªông H·∫°n ch·∫ø Cao, c√≥ th·ªÉ m·ªü r·ªông ƒë·ªôc l·∫≠p G·ª° l·ªói Kh√≥ khƒÉn ƒë·ªÉ truy v·∫øt l·ªãch s·ª≠ D·ªÖ d√†ng g·ª° l·ªói v√† ph√°t l·∫°i s·ª± ki·ªán T√≠nh nh·∫•t qu√°n Giao d·ªãch ACID Nh·∫•t qu√°n theo th·ªùi gian (Eventual Consistency) Ki·∫øn tr√∫c t·ªïng th·ªÉ c·ªßa h·ªá th·ªëng ch√∫ng ta s·∫Ω x√¢y d·ª±ng: ‚òÅÔ∏è M√¥ t·∫£ c√°c th√†nh ph·∫ßn ki·∫øn tr√∫c üîÑ Lu·ªìng ch√≠nh:\nY√™u c·∫ßu t·ª´ Client\nClient g·ª≠i y√™u c·∫ßu qua CloudFront (m·∫°ng ph√¢n ph·ªëi n·ªôi dung to√†n c·∫ßu - CDN) CloudFront cache n·ªôi dung tƒ©nh v√† ƒëi·ªÅu h∆∞·ªõng c√°c y√™u c·∫ßu ƒë·ªông API Gateway\nNh·∫≠n y√™u c·∫ßu t·ª´ CloudFront X·ª≠ l√Ω x√°c th·ª±c, gi·ªõi h·∫°n t·∫ßn su·∫•t, ki·ªÉm tra h·ª£p l·ªá y√™u c·∫ßu ƒê·ªãnh tuy·∫øn y√™u c·∫ßu ƒë·∫øn c√°c h√†m Lambda ph√π h·ª£p Command Handler (Lambda)\nX·ª≠ l√Ω nghi·ªáp v·ª• cho c√°c thao t√°c ghi X√°c th·ª±c l·ªánh v√† t·∫°o ra c√°c s·ª± ki·ªán Th√™m c√°c s·ª± ki·ªán v√†o EventStore (DynamoDB) Event Processing Pipeline\nEventBridge: ƒêi·ªÅu ph·ªëi v√† l·ªçc s·ª± ki·ªán qua quy t·∫Øc \u0026ldquo;OrderEventBus\u0026rdquo; CloudWatch + X-Ray: Gi√°m s√°t v√† truy v·∫øt ph√¢n t√°n ƒê·ªãnh tuy·∫øn s·ª± ki·ªán ƒë·∫øn c√°c b·ªô x·ª≠ l√Ω th√≠ch h·ª£p L∆∞u tr·ªØ \u0026amp; ph√°t l·∫°i s·ª± ki·ªán\nEventStore (DynamoDB): L∆∞u tr·ªØ c√°c s·ª± ki·ªán b·∫•t bi·∫øn Replay Lambda: Ph√°t l·∫°i s·ª± ki·ªán khi c·∫ßn t√°i t·∫°o tr·∫°ng th√°i ReadModel (DynamoDB): C√°c view ƒë∆∞·ª£c t·∫°o v·∫≠t ch·∫•t t·ªëi ∆∞u cho truy v·∫•n X·ª≠ l√Ω truy v·∫•n\nQuery Lambda: X·ª≠ l√Ω c√°c thao t√°c ƒë·ªçc t·ª´ ReadModel SNS: Th√¥ng b√°o v√† ph√°t h√†nh s·ª± ki·ªán üîß C√°c c√¥ng ngh·ªá Serverless s·ª≠ d·ª•ng D·ªãch v·ª• Vai tr√≤ AWS Lambda X·ª≠ l√Ω Command/Query EventBridge Bus s·ª± ki·ªán v√† ƒë·ªãnh tuy·∫øn DynamoDB L∆∞u tr·ªØ s·ª± ki·ªán v√† m√¥ h√¨nh ƒë·ªçc API Gateway Endpoint REST API S3 + CloudFront L∆∞u tr·ªØ website tƒ©nh CloudWatch Gi√°m s√°t v√† ghi log X-Ray Truy v·∫øt ph√¢n t√°n SNS Pub/Sub nh·∫Øn tin üöÄ K·∫øt th√∫c workshop th·ª±c h√†nh n√†y, b·∫°n s·∫Ω c√≥ kinh nghi·ªám x√¢y d·ª±ng h·ªá th·ªëng ch·ªãu l·ªói, tu√¢n th·ªß ki·ªÉm to√°n s·ª≠ d·ª•ng m√¥ h√¨nh Event Sourcing v√† CQRS, c≈©ng nh∆∞ t·ª± tin thi·∫øt k·∫ø c√°c ·ª©ng d·ª•ng serverless ph·ª©c t·∫°p v·ªõi lu·ªìng nghi·ªáp v·ª• c√≥ kh·∫£ nƒÉng truy xu·∫•t l·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß.\n"
},
{
	"uri": "/vi/8-testing/8.1-testing/",
	"title": "Ki·ªÉm th·ª≠ ·ª©ng d·ª•ng",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: Truy c·∫≠p ·ª©ng d·ª•ng M·ªü tr√¨nh duy·ªát web v√† truy c·∫≠p v√†o URL trang web tƒ©nh S3 c·ªßa b·∫°n. B·∫°n s·∫Ω th·∫•y trang ch·ªß ·ª©ng d·ª•ng FAST FOOD. Nh·∫•p v√†o Place order ƒë·ªÉ b·∫Øt ƒë·∫ßu ki·ªÉm th·ª≠ ch·ª©c nƒÉng ƒë·∫∑t h√†ng. B∆∞·ªõc 2: ƒê·∫∑t m·ªôt ƒë∆°n h√†ng th·ª≠ nghi·ªám ·ªû ph·∫ßn menu, ch·ªçn m·ªôt m√≥n (v√≠ d·ª•: Coca Cola).\nNh·∫•p n√∫t + ƒë·ªÉ th√™m v√†o gi·ªè h√†ng.\nƒêi·ªÅn th√¥ng tin kh√°ch h√†ng:\nT√™n: ho chi khanh S·ªë ƒëi·ªán tho·∫°i: 0937026887 ƒê·ªãa ch·ªâ: qu·∫≠n 9 Nh·∫•p Checkout ƒë·ªÉ ƒë·∫∑t ƒë∆°n h√†ng. B∆∞·ªõc 3: X√°c nh·∫≠n tr·∫°ng th√°i ƒë∆°n h√†ng Sau khi ƒë·∫∑t ƒë∆°n, b·∫°n s·∫Ω th·∫•y tr·∫°ng th√°i ƒë∆°n thay ƒë·ªïi th√†nh Confirmed. Ghi l·∫°i m√£ ƒë∆°n h√†ng (v√≠ d·ª•: Order #23b07487\u0026hellip;) v√† th·ªùi gian ƒë·∫∑t. ƒê∆°n h√†ng s·∫Ω hi·ªÉn th·ªã tr·∫°ng th√°i \u0026ldquo;Order confirmed and being prepared\u0026rdquo; (ƒê∆°n h√†ng ƒë√£ ƒë∆∞·ª£c x√°c nh·∫≠n v√† ƒëang ƒë∆∞·ª£c chu·∫©n b·ªã). B∆∞·ªõc 4: Ki·ªÉm tra email th√¥ng b√°o Ki·ªÉm tra h·ªôp th∆∞ email ƒë√£ ƒëƒÉng k√Ω nh·∫≠n th√¥ng b√°o SNS.\nB·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c email v·ªõi ti√™u ƒë·ªÅ: [ADMIN] New Order Placed - #23b07487\nEmail s·∫Ω ch·ª©a th√¥ng tin:\nM√£ ƒë∆°n h√†ng: 23b07487-9bc8-47b3-a013-86238ec216fd Kh√°ch h√†ng: ho chi khanh S·ªë ƒëi·ªán tho·∫°i: 0937026887 T·ªïng ti·ªÅn: $2.99 Tr·∫°ng th√°i: PLACED B∆∞·ªõc 5: Ki·ªÉm th·ª≠ x√°c nh·∫≠n ƒë∆°n h√†ng Tr√™n trang chi ti·∫øt ƒë∆°n h√†ng, b·∫°n s·∫Ω th·∫•y tr·∫°ng th√°i ƒë∆°n l√† Pending. B·∫°n s·∫Ω th·∫•y th√¥ng b√°o \u0026ldquo;Order is awaiting your action\u0026rdquo; (ƒê∆°n h√†ng ƒëang ch·ªù b·∫°n x·ª≠ l√Ω). Nh·∫•p n√∫t Confirm Order ƒë·ªÉ x√°c nh·∫≠n ƒë∆°n. L∆∞u √Ω c√≤n c√≥ t√πy ch·ªçn Cancel Order ƒë·ªÉ h·ªßy ƒë∆°n. B∆∞·ªõc 6: Ki·ªÉm th·ª≠ qu·∫£n l√Ω ƒë∆°n h√†ng B·∫°n c√≥ th·ªÉ ki·ªÉm th·ª≠ ch·ª©c nƒÉng qu·∫£n l√Ω ƒë∆°n b·∫±ng c√°ch:\nNh·∫•p Cancel Order ƒë·ªÉ h·ªßy ƒë∆°n. Nh·∫•p Confirm Order ƒë·ªÉ x√°c nh·∫≠n ƒë√£ nh·∫≠n ƒë∆°n. M·ªói thao t√°c s·∫Ω k√≠ch ho·∫°t c·∫≠p nh·∫≠t tr·∫°ng th√°i v√† g·ª≠i th√¥ng b√°o t∆∞∆°ng ·ª©ng.\nB∆∞·ªõc 7: Ki·ªÉm tra d·ªØ li·ªáu trong c∆° s·ªü d·ªØ li·ªáu Truy c·∫≠p AWS Console v√† v√†o DynamoDB. Nh·∫•p Explore items ƒë·ªÉ xem d·ªØ li·ªáu ƒë√£ l∆∞u. Ki·ªÉm tra b·∫£ng EventStore Ki·ªÉm tra b·∫£ng OrderReadModel Ki·ªÉm tra b·∫£ng CustomerReadModel "
},
{
	"uri": "/vi/3-eventstore/3.1-create-eventstore-table/",
	"title": "T·∫°o b·∫£ng EventStore",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: M·ªü DynamoDB Console Trong AWS Management Console, t√¨m ki·∫øm DynamoDB. Nh·∫•n DynamoDB ƒë·ªÉ m·ªü d·ªãch v·ª•. B∆∞·ªõc 2: T·∫°o b·∫£ng Nh·∫•n Create table.\nNh·∫≠p Table name: EventStore Nh·∫≠p Partition key: aggregateId (String) Nh·∫≠p Sort key: eventId (String) Ch·ªçn Default settings. Nh·∫•n Create table.\n‚úÖ K·∫øt qu·∫£: B·∫£ng EventStore s·∫Ω ƒë∆∞·ª£c t·∫°o v·ªõi aggregateId v√† eventId l√†m kh√≥a.\nB∆∞·ªõc 3: T·∫°o Global Secondary Index Sau khi b·∫£ng EventStore ƒë∆∞·ª£c t·∫°o, b·∫°n c·∫ßn th√™m Global Secondary Index ƒë·ªÉ truy v·∫•n hi·ªáu qu·∫£ h∆°n.\nTrong b·∫£ng EventStore, m·ªü tab Indexes.\nNh·∫•n n√∫t Create index.\nC·∫•u h√¨nh Global Secondary Index:\nPartition key: aggregateId (String) Sort key: timestamp (String) Index name: AggregateIndex Data type: Gi·ªØ c·∫£ hai l√† String Capacity mode: On-demand (m·∫∑c ƒë·ªãnh) Gi·ªØ nguy√™n c√°c thi·∫øt l·∫≠p kh√°c v√† nh·∫•n Create index. ‚úÖ K·∫øt qu·∫£: B·∫£ng EventStore hi·ªán ƒë√£ s·∫µn s√†ng v·ªõi:\nPrimary key: aggregateId (Partition) + eventId (Sort) Global Secondary Index: AggregateIndex v·ªõi aggregateId (Partition) + timestamp (Sort) On-demand capacity mode ƒë·ªÉ t·ª± ƒë·ªông m·ªü r·ªông. C·∫•u h√¨nh n√†y cho ph√©p truy v·∫•n s·ª± ki·ªán m·ªôt c√°ch hi·ªáu qu·∫£ c·∫£ theo eventId ri√™ng l·∫ª v√† theo aggregate v·ªõi th·ª© t·ª± th·ªùi gian.\n"
},
{
	"uri": "/vi/6-configapigateway/6.1-create-new-api-gateway/",
	"title": "T·∫°o m·ªõi API Gateway",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω t·∫°o m·ªôt REST API m·ªõi b·∫±ng Amazon API Gateway ƒë·ªÉ ƒë√≥ng vai tr√≤ l√† giao di·ªán HTTP cho h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn nhanh. API n√†y s·∫Ω cung c·∫•p c√°c endpoint ƒë·ªÉ qu·∫£n l√Ω ƒë∆°n h√†ng v√† t√≠ch h·ª£p v·ªõi c√°c h√†m Lambda tri·ªÉn khai ki·∫øn tr√∫c Event Sourcing.\nB∆∞·ªõc 1: M·ªü Amazon API Gateway Console Trong AWS Management Console, t√¨m ki·∫øm API Gateway. Nh·∫•p v√†o API Gateway ƒë·ªÉ m·ªü d·ªãch v·ª•. B∆∞·ªõc 2: T·∫°o REST API m·ªõi Nh·∫•p n√∫t Create API.\nCh·ªçn REST API v√† nh·∫•n Build.\nC·∫•u h√¨nh API:\nCh·ªçn giao th·ª©c: REST T·∫°o API m·ªõi: New API (ƒë∆∞·ª£c ch·ªçn m·∫∑c ƒë·ªãnh) T√™n API: FastFoodOrderAPI M√¥ t·∫£: API cho H·ªá th·ªëng ƒê·∫∑t ƒê·ªì ƒÉn Nhanh Lo·∫°i endpoint API: Regional Nh·∫•n Create API.\n‚úÖ K·∫øt qu·∫£: REST API FastFoodOrderAPI ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng v√† s·∫µn s√†ng ƒë·ªÉ c·∫•u h√¨nh resource v√† method.\nB∆∞·ªõc 3: T·∫°o Resource /orders Trong API v·ª´a t·∫°o ‚Üí Ch·ªçn Create Resource\nC·∫•u h√¨nh resource:\nT√™n Resource: orders ƒê∆∞·ªùng d·∫´n Resource: /orders B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource\nB∆∞·ªõc 4: T·∫°o method POST cho /orders Ch·ªçn resource /orders Nh·∫•n Actions ‚Üí Create Method\nCh·ªçn POST t·ª´ danh s√°ch th·∫£ xu·ªëng ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh method: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function V√πng Lambda (Lambda Region): Ch·ªçn v√πng c·ªßa b·∫°n H√†m Lambda (Lambda Function): OrderCommandHandler S·ª≠ d·ª•ng th·ªùi gian ch·ªù m·∫∑c ƒë·ªãnh (Use Default Timeout): Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Save Nh·∫•n OK ƒë·ªÉ cho ph√©p API Gateway g·ªçi Lambda\nB∆∞·ªõc 5: T·∫°o method GET cho /orders Ch·ªçn resource /orders Nh·∫•n Actions ‚Üí Create Method Ch·ªçn GET ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): OrderQueryHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 6: T·∫°o Resource /orders/{id} Ch·ªçn resource /orders Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: {id} ƒê∆∞·ªùng d·∫´n Resource: /{id} B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 7: T·∫°o method GET cho /orders/{id} Ch·ªçn resource /{id} Nh·∫•n Actions ‚Üí Create Method Ch·ªçn GET ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): OrderQueryHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 8: T·∫°o Resource /orders/confirm Ch·ªçn resource /orders Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: confirm ƒê∆∞·ªùng d·∫´n Resource: /confirm B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 9: T·∫°o method POST cho /orders/confirm Ch·ªçn resource /confirm Nh·∫•n Actions ‚Üí Create Method Ch·ªçn POST ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): OrderCommandHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 10: T·∫°o Resource /orders/cancel Ch·ªçn resource /orders Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: cancel ƒê∆∞·ªùng d·∫´n Resource: /cancel B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 11: T·∫°o method POST cho /orders/cancel Ch·ªçn resource /cancel Nh·∫•n Actions ‚Üí Create Method Ch·ªçn POST ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): OrderCommandHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 12: T·∫°o Resource /menu Ch·ªçn resource g·ªëc / Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: menu ƒê∆∞·ªùng d·∫´n Resource: /menu B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 13: T·∫°o method GET cho /menu Ch·ªçn resource /menu Nh·∫•n Actions ‚Üí Create Method Ch·ªçn GET ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): OrderQueryHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 14: T·∫°o Resource /customers Ch·ªçn resource g·ªëc / Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: customers ƒê∆∞·ªùng d·∫´n Resource: /customers B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 15: T·∫°o method GET cho /customers Ch·ªçn resource /customers Nh·∫•n Actions ‚Üí Create Method Ch·ªçn GET ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): OrderQueryHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 16: T·∫°o Resource /reconstruct Ch·ªçn resource g·ªëc / Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: reconstruct ƒê∆∞·ªùng d·∫´n Resource: /reconstruct B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 17: T·∫°o Resource /reconstruct/order Ch·ªçn resource /reconstruct Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: order ƒê∆∞·ªùng d·∫´n Resource: /order B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 18: T·∫°o method POST cho /reconstruct/order Ch·ªçn resource /reconstruct/order Nh·∫•n Actions ‚Üí Create Method Ch·ªçn POST ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): StateReconstructionHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 19: T·∫°o Resource /reconstruct/all Ch·ªçn resource /reconstruct Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: all ƒê∆∞·ªùng d·∫´n Resource: /all B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource B∆∞·ªõc 20: T·∫°o method POST cho /reconstruct/all Ch·ªçn resource /reconstruct/all Nh·∫•n Actions ‚Üí Create Method Ch·ªçn POST ‚Üí Nh·∫•n ‚úì C·∫•u h√¨nh: Lo·∫°i t√≠ch h·ª£p (Integration type): Lambda Function H√†m Lambda (Lambda Function): StateReconstructionHandler Nh·∫•n Save ‚Üí OK B∆∞·ªõc 21: T·∫°o Resource /reconstruct/validate Ch·ªçn resource /reconstruct Nh·∫•n Actions ‚Üí Create Resource C·∫•u h√¨nh: T√™n Resource: validate ƒê∆∞·ªùng d·∫´n Resource: /validate B·∫≠t API Gateway CORS: Ch·ªçn t√πy ch·ªçn n√†y Nh·∫•n Create Resource "
},
{
	"uri": "/vi/7-deployfrontend/7.1-create-s3-bucket/",
	"title": "T·∫°o S3 Bucket",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: Truy c·∫≠p S3 Console Trong AWS Management Console, t√¨m ki·∫øm S3. Nh·∫•p v√†o S3 ƒë·ªÉ m·ªü d·ªãch v·ª•. B∆∞·ªõc 2: T·∫°o Bucket M·ªõi Nh·∫•p Create bucket. Nh·∫≠p t√™n bucket duy nh·∫•t, v√≠ d·ª•:\nevent-sourcing-fastfood-frontend Ch·ªçn region g·∫ßn ng∆∞·ªùi d√πng c·ªßa b·∫°n nh·∫•t (v√≠ d·ª•: ap-southeast-1). Trong Block Public Access settings for this bucket, b·ªè ch·ªçn t·∫•t c·∫£ c√°c √¥ ƒë·ªÉ cho ph√©p truy c·∫≠p c√¥ng khai khi host website tƒ©nh. Nh·∫•p Create bucket. M·ªü bucket v·ª´a t·∫°o. Chuy·ªÉn sang tab Properties. K√©o xu·ªëng m·ª•c Static website hosting v√† nh·∫•p Edit. Ch·ªçn Enable. ƒê·∫∑t Index document th√†nh index.html. Nh·∫•p Save changes. B∆∞·ªõc 3: C·∫•u h√¨nh Bucket Policy cho Truy c·∫≠p C√¥ng khai V·∫´n trong bucket c·ªßa b·∫°n, v√†o tab Permissions. K√©o xu·ªëng Bucket policy v√† nh·∫•p Edit. Th√™m bucket policy sau ƒë·ªÉ cho ph√©p ƒë·ªçc c√¥ng khai c√°c file website tƒ©nh: { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;PublicReadGetObject\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::event-sourcing-fastfood-frontend/*\u0026#34; } ] } Thay th·∫ø event-sourcing-fastfood-frontend b·∫±ng t√™n bucket th·ª±c t·∫ø c·ªßa b·∫°n.\nNh·∫•p Save changes ƒë·ªÉ l∆∞u thay ƒë·ªïi.\n"
},
{
	"uri": "/vi/5-setupeventbridge/5.1-customeventbus/",
	"title": "Thi·∫øt l·∫≠p Custom Event Bus cho Quy tr√¨nh Event Sourcing",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: M·ªü Amazon EventBridge Console Trong AWS Management Console, t√¨m ki·∫øm EventBridge. Nh·∫•n Amazon EventBridge ƒë·ªÉ m·ªü d·ªãch v·ª•. B∆∞·ªõc 2: T·∫°o Event Bus ·ªû b·∫£ng ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i, ch·ªçn Event buses. Nh·∫•n Create event bus. Name: Nh·∫≠p FastFoodOrderBus Description: Nh·∫≠p Custom event bus for fastfood order events Gi·ªØ nguy√™n thi·∫øt l·∫≠p m·∫∑c ƒë·ªãnh cho Encryption. Nh·∫•n Create event bus. ‚úÖ K·∫øt qu·∫£: Event bus t√πy ch·ªânh FastFoodOrderBus ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng v√† s·∫µn s√†ng nh·∫≠n c√°c s·ª± ki·ªán ƒë∆°n h√†ng.\n"
},
{
	"uri": "/vi/",
	"title": "TRI·ªÇN KHAI H·ªÜ TH·ªêNG ƒê·∫∂T H√ÄNG SERVERLESS V·ªöI EVENT SOURCING TR√äN AWS",
	"tags": [],
	"description": "",
	"content": "TRI·ªÇN KHAI H·ªÜ TH·ªêNG ƒê·∫∂T H√ÄNG SERVERLESS V·ªöI EVENT SOURCING TR√äN AWS T·ªïng quan Trong workshop n√†y, b·∫°n s·∫Ω h·ªçc c√°c ki·∫øn th·ª©c n·ªÅn t·∫£ng v√† c√°ch tri·ªÉn khai th·ª±c t·∫ø c·ªßa M√¥ h√¨nh Event Sourcing b·∫±ng c√°c d·ªãch v·ª• Serverless c·ªßa AWS. B·∫°n s·∫Ω x√¢y d·ª±ng m·ªôt h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn nhanh ho√†n ch·ªânh v·ªõi kh·∫£ nƒÉng x·ª≠ l√Ω s·ª± ki·ªán t·ª©c th√¨, t√°i t·∫°o tr·∫°ng th√°i v√† gi√°m s√°t to√†n di·ªán.\nKi·∫øn tr√∫c t·ªïng quan c·ªßa h·ªá th·ªëng ch√∫ng ta s·∫Ω x√¢y d·ª±ng: N·ªôi dung Gi·ªõi thi·ªáu C√°c b∆∞·ªõc chu·∫©n b·ªã T·∫°o Event Store (DynamoDB) Thi·∫øt l·∫≠p EventBridge Pipeline Tri·ªÉn khai c√°c h√†m Lambda C·∫•u h√¨nh API Gateway Tri·ªÉn khai ·ª©ng d·ª•ng Frontend Ki·ªÉm th·ª≠ \u0026amp; Gi√°m s√°t D·ªçn d·∫πp t√†i nguy√™n "
},
{
	"uri": "/vi/4-deploylambda/4.1-implementfunctionordercommandhandler/",
	"title": "Tri·ªÉn khai OrderCommandHandler ",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω tri·ªÉn khai h√†m Lambda OrderCommandHandler ƒë·ªÉ x·ª≠ l√Ω c√°c l·ªánh (command) li√™n quan ƒë·∫øn ƒë∆°n h√†ng trong h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn nhanh.\nH√†m n√†y s·∫Ω th·ª±c hi·ªán c√°c t√°c v·ª• nh∆∞ ƒë·∫∑t h√†ng, x√°c nh·∫≠n ƒë∆°n h√†ng v√† h·ªßy ƒë∆°n h√†ng.\nB∆∞·ªõc 1: M·ªü Lambda Console Trong AWS Management Console, t√¨m ki·∫øm Lambda. Nh·∫•n v√†o Lambda ƒë·ªÉ m·ªü d·ªãch v·ª•.\nB∆∞·ªõc 2: T·∫°o h√†m Lambda Nh·∫•n Create function.\nCh·ªçn Author from scratch.\nNh·∫≠p Function name: OrderCommandHandler.\nCh·ªçn Runtime: Python 3.12.\nCh·ªçn Architecture: x86_64.\nM·ªü r·ªông m·ª•c Change default execution role.\nCh·ªçn Use an existing role.\nCh·ªçn EventSourcingLambdaRole t·ª´ danh s√°ch.\nNh·∫•n Create function.\nB∆∞·ªõc 3: Tri·ªÉn khai m√£ h√†m Trong ph·∫ßn Code source c·ªßa h√†m OrderCommandHandler, thay th·∫ø m√£ m·∫∑c ƒë·ªãnh b·∫±ng ƒëo·∫°n sau: import json import boto3 import uuid from datetime import datetime, timedelta from decimal import Decimal # Initialize AWS clients dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) eventbridge = boto3.client(\u0026#39;events\u0026#39;) # DynamoDB tables event_store_table = dynamodb.Table(\u0026#39;EventStore\u0026#39;) menu_items_table = dynamodb.Table(\u0026#39;MenuItems\u0026#39;) def lambda_handler(event, context): try: # Parse request http_method = event[\u0026#39;httpMethod\u0026#39;] path = event[\u0026#39;path\u0026#39;] body = json.loads(event[\u0026#39;body\u0026#39;]) if event.get(\u0026#39;body\u0026#39;) else {} print(f\u0026#34;Processing {http_method} {path}\u0026#34;) print(f\u0026#34;Body: {body}\u0026#34;) if path == \u0026#39;/orders\u0026#39; and http_method == \u0026#39;POST\u0026#39;: return handle_place_order(body) elif path == \u0026#39;/orders/confirm\u0026#39; and http_method == \u0026#39;POST\u0026#39;: return handle_confirm_order(body) elif path == \u0026#39;/orders/cancel\u0026#39; and http_method == \u0026#39;POST\u0026#39;: return handle_cancel_order(body) else: return build_response(404, {\u0026#39;error\u0026#39;: \u0026#39;Endpoint not found\u0026#39;}) except Exception as e: print(f\u0026#34;Error: {str(e)}\u0026#34;) import traceback traceback.print_exc() return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Internal server error\u0026#39;}) def handle_place_order(order_data): # Validate order data required_fields = [\u0026#39;customerName\u0026#39;, \u0026#39;customerPhone\u0026#39;, \u0026#39;customerAddress\u0026#39;, \u0026#39;items\u0026#39;] if not all(field in order_data for field in required_fields): return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;Missing required fields\u0026#39;}) # Validate items if not order_data[\u0026#39;items\u0026#39;] or len(order_data[\u0026#39;items\u0026#39;]) == 0: return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;Order must contain at least one item\u0026#39;}) # Generate order ID order_id = str(uuid.uuid4()) # Calculate total amount total_amount = Decimal(\u0026#39;0\u0026#39;) validated_items = [] for item in order_data[\u0026#39;items\u0026#39;]: if \u0026#39;itemId\u0026#39; not in item or \u0026#39;quantity\u0026#39; not in item: return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;Each item must have itemId and quantity\u0026#39;}) # Get item price from menu try: menu_item = menu_items_table.get_item(Key={\u0026#39;itemId\u0026#39;: item[\u0026#39;itemId\u0026#39;]}) if \u0026#39;Item\u0026#39; not in menu_item: return build_response(400, {\u0026#39;error\u0026#39;: f\u0026#39;Item {item[\u0026#34;itemId\u0026#34;]} not found\u0026#39;}) menu_item_data = menu_item[\u0026#39;Item\u0026#39;] if not menu_item_data.get(\u0026#39;available\u0026#39;, False): return build_response(400, {\u0026#39;error\u0026#39;: f\u0026#39;Item {item[\u0026#34;itemId\u0026#34;]} is not available\u0026#39;}) item_price = Decimal(str(menu_item_data[\u0026#39;price\u0026#39;])) quantity = int(item[\u0026#39;quantity\u0026#39;]) item_total = item_price * quantity total_amount += item_total validated_items.append({ \u0026#39;itemId\u0026#39;: item[\u0026#39;itemId\u0026#39;], \u0026#39;name\u0026#39;: menu_item_data[\u0026#39;name\u0026#39;], \u0026#39;price\u0026#39;: item_price, # Keep as Decimal for DynamoDB \u0026#39;quantity\u0026#39;: quantity, \u0026#39;image\u0026#39;: menu_item_data.get(\u0026#39;image\u0026#39;, \u0026#39;\u0026#39;), \u0026#39;total\u0026#39;: item_total # Keep as Decimal for DynamoDB }) except Exception as e: print(f\u0026#34;Error processing item {item[\u0026#39;itemId\u0026#39;]}: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: f\u0026#39;Error processing item {item[\u0026#34;itemId\u0026#34;]}\u0026#39;}) # Create OrderPlaced event event_id = str(uuid.uuid4()) timestamp = datetime.utcnow().isoformat() event_data = { \u0026#39;eventId\u0026#39;: event_id, \u0026#39;aggregateId\u0026#39;: order_id, \u0026#39;eventType\u0026#39;: \u0026#39;OrderPlaced\u0026#39;, \u0026#39;eventData\u0026#39;: { \u0026#39;orderId\u0026#39;: order_id, \u0026#39;customerName\u0026#39;: order_data[\u0026#39;customerName\u0026#39;], \u0026#39;customerPhone\u0026#39;: order_data[\u0026#39;customerPhone\u0026#39;], \u0026#39;customerAddress\u0026#39;: order_data[\u0026#39;customerAddress\u0026#39;], \u0026#39;items\u0026#39;: validated_items, \u0026#39;totalAmount\u0026#39;: total_amount, # Keep as Decimal for DynamoDB \u0026#39;status\u0026#39;: \u0026#39;PLACED\u0026#39;, \u0026#39;timestamp\u0026#39;: timestamp }, \u0026#39;timestamp\u0026#39;: timestamp, \u0026#39;version\u0026#39;: 1 } try: # Store event in Event Store event_store_table.put_item(Item=event_data) print(f\u0026#34;Event stored successfully in EventStore\u0026#34;) # Publish event to EventBridge (convert Decimals to float for JSON serialization) publish_event_to_bridge(event_data) print(f\u0026#34;Event published to EventBridge successfully\u0026#34;) return build_response(201, { \u0026#39;orderId\u0026#39;: order_id, \u0026#39;message\u0026#39;: \u0026#39;Order placed successfully\u0026#39;, \u0026#39;totalAmount\u0026#39;: float(total_amount), # Convert to float for JSON response \u0026#39;items\u0026#39;: convert_decimals_to_float(validated_items), # Convert for JSON response \u0026#39;status\u0026#39;: \u0026#39;PLACED\u0026#39; }) except Exception as e: print(f\u0026#34;Error storing event: {str(e)}\u0026#34;) import traceback traceback.print_exc() return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to process order\u0026#39;}) def handle_confirm_order(confirm_data): order_id = confirm_data.get(\u0026#39;orderId\u0026#39;) if not order_id: return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;Order ID required\u0026#39;}) # Calculate estimated delivery time (30 minutes from now) estimated_delivery = (datetime.utcnow() + timedelta(minutes=30)).isoformat() # Create OrderConfirmed event event_id = str(uuid.uuid4()) timestamp = datetime.utcnow().isoformat() event_data = { \u0026#39;eventId\u0026#39;: event_id, \u0026#39;aggregateId\u0026#39;: order_id, \u0026#39;eventType\u0026#39;: \u0026#39;OrderConfirmed\u0026#39;, \u0026#39;eventData\u0026#39;: { \u0026#39;orderId\u0026#39;: order_id, \u0026#39;confirmedAt\u0026#39;: timestamp, \u0026#39;estimatedDelivery\u0026#39;: estimated_delivery, \u0026#39;status\u0026#39;: \u0026#39;CONFIRMED\u0026#39; }, \u0026#39;timestamp\u0026#39;: timestamp, \u0026#39;version\u0026#39;: 1 } try: # Store event event_store_table.put_item(Item=event_data) # Publish event publish_event_to_bridge(event_data) return build_response(200, { \u0026#39;message\u0026#39;: \u0026#39;Order confirmed successfully\u0026#39;, \u0026#39;estimatedDelivery\u0026#39;: estimated_delivery }) except Exception as e: print(f\u0026#34;Error confirming order: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to confirm order\u0026#39;}) def handle_cancel_order(cancel_data): order_id = cancel_data.get(\u0026#39;orderId\u0026#39;) reason = cancel_data.get(\u0026#39;reason\u0026#39;, \u0026#39;Customer request\u0026#39;) if not order_id: return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;Order ID required\u0026#39;}) # Create OrderCancelled event event_id = str(uuid.uuid4()) timestamp = datetime.utcnow().isoformat() event_data = { \u0026#39;eventId\u0026#39;: event_id, \u0026#39;aggregateId\u0026#39;: order_id, \u0026#39;eventType\u0026#39;: \u0026#39;OrderCancelled\u0026#39;, \u0026#39;eventData\u0026#39;: { \u0026#39;orderId\u0026#39;: order_id, \u0026#39;cancelledAt\u0026#39;: timestamp, \u0026#39;reason\u0026#39;: reason, \u0026#39;status\u0026#39;: \u0026#39;CANCELLED\u0026#39; }, \u0026#39;timestamp\u0026#39;: timestamp, \u0026#39;version\u0026#39;: 1 } try: # Store event event_store_table.put_item(Item=event_data) # Publish event publish_event_to_bridge(event_data) return build_response(200, { \u0026#39;message\u0026#39;: \u0026#39;Order cancelled successfully\u0026#39;, \u0026#39;reason\u0026#39;: reason }) except Exception as e: print(f\u0026#34;Error cancelling order: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to cancel order\u0026#39;}) def publish_event_to_bridge(event_data): try: # Convert Decimal values to float for JSON serialization event_data_for_bridge = convert_decimals_to_float(event_data[\u0026#39;eventData\u0026#39;]) print(f\u0026#34;Publishing event to EventBridge: {event_data[\u0026#39;eventType\u0026#39;]}\u0026#34;) print(f\u0026#34;Event data: {event_data_for_bridge}\u0026#34;) response = eventbridge.put_events( Entries=[ { \u0026#39;Source\u0026#39;: \u0026#39;fastfood.orders\u0026#39;, \u0026#39;DetailType\u0026#39;: event_data[\u0026#39;eventType\u0026#39;], \u0026#39;Detail\u0026#39;: json.dumps(event_data_for_bridge, default=str), \u0026#39;EventBusName\u0026#39;: \u0026#39;FastFoodOrderBus\u0026#39; } ] ) print(f\u0026#34;EventBridge response: {response}\u0026#34;) # Check if there were any failures if response.get(\u0026#39;FailedEntryCount\u0026#39;, 0) \u0026gt; 0: print(f\u0026#34;Failed to publish some events: {response.get(\u0026#39;Entries\u0026#39;, [])}\u0026#34;) raise Exception(\u0026#34;Failed to publish event to EventBridge\u0026#34;) except Exception as e: print(f\u0026#34;Error publishing event to EventBridge: {str(e)}\u0026#34;) import traceback traceback.print_exc() raise def convert_decimals_to_float(obj): \u0026#34;\u0026#34;\u0026#34; Recursively convert Decimal objects to float for JSON serialization \u0026#34;\u0026#34;\u0026#34; if isinstance(obj, list): return [convert_decimals_to_float(item) for item in obj] elif isinstance(obj, dict): return {key: convert_decimals_to_float(value) for key, value in obj.items()} elif isinstance(obj, Decimal): return float(obj) else: return obj def build_response(status_code, body): return { \u0026#39;statusCode\u0026#39;: status_code, \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39;, \u0026#39;Access-Control-Allow-Methods\u0026#39;: \u0026#39;GET, POST, PUT, DELETE, OPTIONS\u0026#39;, \u0026#39;Access-Control-Allow-Headers\u0026#39;: \u0026#39;Content-Type, Authorization\u0026#39; }, \u0026#39;body\u0026#39;: json.dumps(body, default=str) } Nh·∫•n Deploy ƒë·ªÉ l∆∞u m√£ h√†m. ‚úÖ K·∫øt qu·∫£: H√†m Lambda OrderCommandHandler ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng v√† s·∫µn s√†ng x·ª≠ l√Ω c√°c l·ªánh ƒë·∫∑t h√†ng.\n"
},
{
	"uri": "/vi/6-configapigateway/6.2-enable-cors/",
	"title": "B·∫≠t CORS",
	"tags": [],
	"description": "",
	"content": "\rTrong b∆∞·ªõc n√†y, ch√∫ng ta s·∫Ω b·∫≠t Cross-Origin Resource Sharing (CORS) cho c√°c t√†i nguy√™n trong API Gateway.\nƒêi·ªÅu n√†y cho ph√©p c√°c ·ª©ng d·ª•ng web ƒë∆∞·ª£c l∆∞u tr·ªØ tr√™n nh·ªØng domain kh√°c nhau c√≥ th·ªÉ g·ªçi API c·ªßa ch√∫ng ta m·ªôt c√°ch an to√†n.\nB∆∞·ªõc 1: B·∫≠t CORS cho t·ª´ng Resource Th·ª±c hi·ªán c√°c b∆∞·ªõc sau cho t·ª´ng resource:\n/orders /orders/{id} /orders/confirm /orders/cancel /menu /customers /reconstruct /reconstruct/order /reconstruct/all Ch·ªçn resource trong API Gateway Console.\nNh·∫•p Enable CORS.\nC·∫•u h√¨nh CORS nh∆∞ sau:\nAccess-Control-Allow-Origin: * Access-Control-Allow-Headers: Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token Access-Control-Allow-Methods: Ch·ªçn t·∫•t c·∫£ c√°c HTTP method c√≥ s·∫µn. Nh·∫•p Enable CORS and replace existing CORS headers.\nL·∫∑p l·∫°i c√°c b∆∞·ªõc n√†y cho t·ª´ng resource ƒë·ªÉ ƒë·∫£m b·∫£o CORS ƒë∆∞·ª£c c·∫•u h√¨nh ƒë·∫ßy ƒë·ªß tr√™n to√†n b·ªô API.\n"
},
{
	"uri": "/vi/2-prerequiste/",
	"title": "CaÃÅc b∆∞∆°ÃÅc chu√¢Ãân biÃ£",
	"tags": [],
	"description": "",
	"content": "Trong b∆∞·ªõc n√†y, ch√∫ng ta s·∫Ω chu·∫©n b·ªã m√¥i tr∆∞·ªùng c·∫ßn thi·∫øt cho workshop, bao g·ªìm c√†i ƒë·∫∑t Node.js, thi·∫øt l·∫≠p m√£ ngu·ªìn frontend, v√† t·∫°o IAM Role cho c√°c d·ªãch v·ª• AWS.\nN·ªôi dung 2.1. C√†i ƒë·∫∑t Node.js 2.2. Thi·∫øt l·∫≠p m√£ ngu·ªìn Frontend 2.3. T·∫°o IAM Role\n"
},
{
	"uri": "/vi/2-prerequiste/2.2-setup-frontend-source/",
	"title": "C√†i ƒë·∫∑t Frontend",
	"tags": [],
	"description": "",
	"content": "C√†i ƒë·∫∑t m√£ ngu·ªìn Frontend Clone d·ª± √°n t·ª´ GitHub: git clone https://github.com/khanhchi423/fastfood-order-frontend.git Di chuy·ªÉn v√†o th∆∞ m·ª•c d·ª± √°n: cd fastfood-order-frontend C√†i ƒë·∫∑t c√°c th∆∞ vi·ªán ph·ª• thu·ªôc c·ªßa d·ª± √°n b·∫±ng npm: npm install Kh·ªüi ƒë·ªông m√°y ch·ªß ph√°t tri·ªÉn: npm run dev N·∫øu m√°y ch·ªß ch·∫°y th√†nh c√¥ng, b·∫°n s·∫Ω th·∫•y th√¥ng b√°o cho bi·∫øt ·ª©ng d·ª•ng ƒëang ch·∫°y, th∆∞·ªùng t·∫°i: http://localhost:3000 M·ªü URL n√†y trong tr√¨nh duy·ªát c·ªßa b·∫°n ƒë·ªÉ xem ·ª©ng d·ª•ng frontend. "
},
{
	"uri": "/vi/5-setupeventbridge/5.1-customeventbus/5.1.1-configure-eventbridge-rules/",
	"title": "C·∫•u h√¨nh EventBridge Rules",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω t·∫°o m·ªôt EventBridge rule h·ªó tr·ª£ ki·∫øn tr√∫c Event Sourcing b·∫±ng c√°ch thu th·∫≠p c√°c domain events t·ª´ custom event bus. Rule n√†y s·∫Ω ƒë·ªãnh tuy·∫øn c√°c s·ª± ki·ªán ƒë∆°n h√†ng (OrderPlaced, OrderConfirmed, OrderCancelled) ƒë·∫øn Lambda function, n∆°i ch√∫ng s·∫Ω ƒë∆∞·ª£c x·ª≠ l√Ω ƒë·ªÉ c·∫≠p nh·∫≠t read models v√† duy tr√¨ event store ‚Äî m·ªôt th√†nh ph·∫ßn c·ªët l√µi c·ªßa m√¥ h√¨nh Event Sourcing.\nB∆∞·ªõc 1: ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn EventBridge Rules Trong Amazon EventBridge console, nh·∫•p v√†o Rules ·ªü thanh ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i. Nh·∫•p Create rule. B∆∞·ªõc 2: X√°c ƒë·ªãnh Th√¥ng tin Rule Name: OrderEventProcessingRule Description: Process all order events Event bus: Ch·ªçn FastFoodOrderBus t·ª´ danh s√°ch th·∫£ xu·ªëng Rule type: Ch·ªçn Rule with an event pattern Nh·∫•p Next. B∆∞·ªõc 3: T·∫°o Event Pattern Creation method: Ch·ªçn Custom pattern (JSON editor) Trong √¥ Event pattern, nh·∫≠p JSON sau: { \u0026#34;source\u0026#34;: [\u0026#34;fastfood.orders\u0026#34;], \u0026#34;detail-type\u0026#34;: [ \u0026#34;OrderPlaced\u0026#34;, \u0026#34;OrderConfirmed\u0026#34;, \u0026#34;OrderCancelled\u0026#34; ] } X√°c minh r·∫±ng ch·ªâ b√°o JSON is valid hi·ªÉn th·ªã d·∫•u ‚úîÔ∏è m√†u xanh. Nh·∫•p Next. B∆∞·ªõc 4: C·∫•u h√¨nh Target Target type: Ch·ªçn AWS service Select a service: Ch·ªçn Lambda function Function: Ch·ªçn OrderEventProcessor t·ª´ danh s√°ch th·∫£ xu·ªëng Gi·ªØ nguy√™n c√°c thi·∫øt l·∫≠p kh√°c m·∫∑c ƒë·ªãnh. Nh·∫•p Next. B∆∞·ªõc 5: C·∫•u h√¨nh Tags (Tu·ª≥ ch·ªçn) B∆∞·ªõc n√†y l√† t√πy ch·ªçn. B·∫°n c√≥ th·ªÉ th√™m tags ƒë·ªÉ t·ªï ch·ª©c v√† qu·∫£n l√Ω EventBridge rule. Nh·∫•p Next ƒë·ªÉ ti·∫øp t·ª•c. B∆∞·ªõc 6: Xem l·∫°i v√† T·∫°o Ki·ªÉm tra l·∫°i to√†n b·ªô th√¥ng tin c·∫•u h√¨nh:\nRule name: OrderEventProcessingRule Event bus: FastFoodOrderBus Event pattern: B·∫Øt c√°c s·ª± ki·ªán fastfood.orders Target: Lambda function OrderEventProcessor Nh·∫•p Create rule.\n‚úÖ K·∫øt qu·∫£: EventBridge rule ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng v√† s·∫Ω t·ª± ƒë·ªông ƒë·ªãnh tuy·∫øn c√°c s·ª± ki·ªán ƒë∆°n h√†ng t·ª´ FastFoodOrderBus ƒë·∫øn Lambda function OrderEventProcessor ƒë·ªÉ x·ª≠ l√Ω.\nT·∫°o StateReconstructionRule Ti·∫øp theo, ch√∫ng ta s·∫Ω t·∫°o m·ªôt rule th·ª© hai ƒë·ªÉ x·ª≠ l√Ω y√™u c·∫ßu kh√¥i ph·ª•c tr·∫°ng th√°i.\nB∆∞·ªõc 7: T·∫°o Rule Th·ª© Hai Nh·∫•p Create rule m·ªôt l·∫ßn n·ªØa ƒë·ªÉ t·∫°o rule m·ªõi.\nC·∫•u h√¨nh th√¥ng tin rule:\nName: StateReconstructionRule Description: Handle state reconstruction requests Event bus: Ch·ªçn FastFoodOrderBus t·ª´ danh s√°ch th·∫£ xu·ªëng Rule type: Ch·ªçn Rule with an event pattern\nNh·∫•p Next.\nB∆∞·ªõc 8: T·∫°o Event Pattern cho State Reconstruction Creation method: Ch·ªçn Custom pattern (JSON editor) Trong √¥ Event pattern, nh·∫≠p JSON sau: { \u0026#34;source\u0026#34;: [\u0026#34;fastfood.orders\u0026#34;], \u0026#34;detail-type\u0026#34;: [ \u0026#34;OrderPlaced\u0026#34;, \u0026#34;OrderConfirmed\u0026#34;, \u0026#34;OrderCancelled\u0026#34; ] } X√°c minh r·∫±ng ch·ªâ b√°o JSON is valid hi·ªÉn th·ªã d·∫•u ‚úîÔ∏è m√†u xanh.\nNh·∫•p Next.\nB∆∞·ªõc 9: C·∫•u h√¨nh Target cho State Reconstruction Target type: Ch·ªçn AWS service Select a service: Ch·ªçn Lambda function Function: Ch·ªçn StateReconstructionHandler t·ª´ danh s√°ch th·∫£ xu·ªëng Gi·ªØ nguy√™n c√°c thi·∫øt l·∫≠p m·∫∑c ƒë·ªãnh kh√°c Nh·∫•p Next\nB∆∞·ªõc 10: Xem l·∫°i v√† T·∫°o State Reconstruction Rule Xem l·∫°i to√†n b·ªô th√¥ng tin c·∫•u h√¨nh:\nRule name: StateReconstructionRule Event bus: FastFoodOrderBus Event pattern: B·∫Øt c√°c s·ª± ki·ªán fastfood.orders Target: Lambda function StateReconstructionHandler üìå L∆∞u √Ω: Trong ·∫£nh minh h·ªça tr√™n, Rule ARN ch·ªâ l√† v√≠ d·ª•.\nH√£y sao ch√©p Rule ARN c·ªßa StateReconstructionRule trong t√†i kho·∫£n AWS c·ªßa b·∫°n.\nB·∫°n c√≥ th·ªÉ t√¨m th·∫•y ARN n√†y trong EventBridge console ‚Üí Ch·ªçn rule c·ªßa b·∫°n ‚Üí Rule ARN (ƒë∆∞·ª£c ƒë√°nh d·∫•u khung ƒë·ªè).\nC·∫•u h√¨nh Quy·ªÅn cho Lambda Function Sau khi t·∫°o EventBridge rule, c·∫ßn ƒë·∫£m b·∫£o Lambda function c√≥ quy·ªÅn ƒë∆∞·ª£c EventBridge g·ªçi.\nV√†o Lambda Console ‚Üí Functions ‚Üí StateReconstructionHandler\nChuy·ªÉn ƒë·∫øn tab Configuration ‚Üí Permissions\nV√†o m·ª•c Resource-based policy statements ‚Üí Add permissions\nTh√™m quy·ªÅn Invoke t·ª´ EventBridge\nService: Ch·ªçn EventBridge (CloudWatch Events) Statement ID: AllowEventBridgeInvokeStateReconstruction Principal: events.amazonaws.com Source ARN: arn:aws:events:ap-southeast-1:218451864254:rule/FastFoodOrderBus/StateReconstructionRule Action: lambda:InvokeFunction** ARN tr√™n ch·ªâ l√† v√≠ d·ª•. H√£y thay b·∫±ng ARN c·ªßa StateReconstructionRule m√† b·∫°n ƒë√£ t·∫°o trong AWS account c·ªßa m√¨nh.\nNh·∫•p Save ƒë·ªÉ √°p d·ª•ng quy·ªÅn. C·∫•u h√¨nh quy·ªÅn n√†y d√†nh cho Lambda function StateReconstructionHandler.\nC√°ch thi·∫øt l·∫≠p t∆∞∆°ng t·ª± nh∆∞ ph·∫ßn quy·ªÅn c·ªßa OrderEventProcessor tr∆∞·ªõc ƒë√≥, ch·ªâ kh√°c t√™n function v√† EventBridge rule li√™n k·∫øt.\nNg·ªØ c·∫£nh Event Sourcing:\nRule n√†y ƒë√≥ng vai tr√≤ quan tr·ªçng trong tri·ªÉn khai Event Sourcing.\nKhi c√°c domain events (OrderPlaced, OrderConfirmed, OrderCancelled) ƒë∆∞·ª£c publish l√™n FastFoodOrderBus, ch√∫ng th·ªÉ hi·ªán c√°c thay ƒë·ªïi tr·∫°ng th√°i trong h·ªá th·ªëng.\nLambda function s·∫Ω x·ª≠ l√Ω c√°c s·ª± ki·ªán n√†y ƒë·ªÉ:\nL∆∞u ch√∫ng v√†o event store (DynamoDB) C·∫≠p nh·∫≠t read models ƒë·ªÉ ph·ª•c v·ª• truy v·∫•n C√≥ th·ªÉ k√≠ch ho·∫°t side effects ho·∫∑c g·ª≠i th√¥ng b√°o ƒêi·ªÅu n√†y cho ph√©p ch√∫ng ta t√°i t·∫°o l·∫°i tr·∫°ng th√°i ·ª©ng d·ª•ng t·ª´ chu·ªói s·ª± ki·ªán ‚Äî nguy√™n t·∫Øc c·ªët l√µi c·ªßa Event Sourcing.\n"
},
{
	"uri": "/vi/8-testing/8.2-monitoring/",
	"title": "Gi√°m s√°t v·ªõi CloudWatch",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn CloudWatch Trong AWS Management Console, t√¨m ki·∫øm CloudWatch. Nh·∫•p v√†o CloudWatch ƒë·ªÉ m·ªü d·ªãch v·ª• gi√°m s√°t. B∆∞·ªõc 2: Xem c√°c nh√≥m Log Trong b·∫£ng ƒëi·ªÅu khi·ªÉn CloudWatch, ƒëi·ªÅu h∆∞·ªõng ƒë·∫øn Logs ‚Üí Log groups.\nB·∫°n s·∫Ω th·∫•y 4 nh√≥m log ƒë∆∞·ª£c t·∫°o cho c√°c h√†m Lambda c·ªßa b·∫°n:\n/aws/lambda/OrderCommandHandler /aws/lambda/OrderEventProcessor /aws/lambda/OrderQueryHandler /aws/lambda/StateReconstructionHandler M·ªói nh√≥m log hi·ªÉn th·ªã lo·∫°i log, th·ªùi gian gi·ªØ log (Retention), v√† c√°c c·∫•u h√¨nh kh√°c. B∆∞·ªõc 3: Gi√°m s√°t log c·ªßa h√†m Lambda Nh·∫•p v√†o nh√≥m log /aws/lambda/StateReconstructionHandler.\nB·∫°n c√≥ th·ªÉ xem chi ti·∫øt nh√≥m log bao g·ªìm:\nTh·ªùi gian t·∫°o: Th·ªùi ƒëi·ªÉm nh√≥m log ƒë∆∞·ª£c t·∫°o Th·ªùi gian gi·ªØ: Kh√¥ng bao gi·ªù h·∫øt h·∫°n (m·∫∑c ƒë·ªãnh) Dung l∆∞·ª£ng l∆∞u tr·ªØ: L∆∞·ª£ng d·ªØ li·ªáu log ƒë√£ l∆∞u ARN: Amazon Resource Name c·ªßa nh√≥m log H√¨nh tr√™n minh h·ªça giao di·ªán xem Log events cho h√†m Lambda StateReconstructionHandler tr√™n AWS CloudWatch. M·ªói m·ª•c log ƒë∆∞·ª£c hi·ªÉn th·ªã theo th·ª© t·ª± th·ªùi gian, ch·ª©a th√¥ng tin v·ªÅ c√°c s·ª± ki·ªán nh·∫≠n ƒë∆∞·ª£c t·ª´ EventBridge (v√≠ d·ª•: OrderPlaced, OrderConfirmed, OrderCancelled), qu√° tr√¨nh t√°i t·∫°o tr·∫°ng th√°i ƒë∆°n h√†ng t·ª´ EventStore, v√† c·∫≠p nh·∫≠t Read Model t∆∞∆°ng ·ª©ng. C√°c log c≈©ng cung c·∫•p c√°c ch·ªâ s·ªë hi·ªáu su·∫•t nh∆∞ th·ªùi gian th·ª±c thi, b·ªô nh·ªõ s·ª≠ d·ª•ng v√† th·ªùi gian kh·ªüi t·∫°o h√†m Lambda. Vi·ªác gi√°m s√°t chi ti·∫øt n√†y gi√∫p ƒë·ªôi ph√°t tri·ªÉn x√°c minh t√≠nh ch√≠nh x√°c c·ªßa lu·ªìng x·ª≠ l√Ω s·ª± ki·ªán, ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n d·ªØ li·ªáu v√† ph√°t hi·ªán c√°c ƒëi·ªÉm ngh·∫Ωn v·ªÅ hi·ªáu su·∫•t ƒë·ªÉ t·ªëi ∆∞u h√≥a.\n"
},
{
	"uri": "/vi/7-deployfrontend/7.2-upload-frontend-to-s3/",
	"title": "T·∫£i Frontend l√™n S3",
	"tags": [],
	"description": "",
	"content": "T·∫£i ReactJS Frontend l√™n S3 (C√°c b∆∞·ªõc chi ti·∫øt) B∆∞·ªõc 1: C·∫•u h√¨nh API URL trong React Tr∆∞·ªõc khi build frontend, h√£y thi·∫øt l·∫≠p bi·∫øn m√¥i tr∆∞·ªùng trong file .env ho·∫∑c tr·ª±c ti·∫øp trong m√¥i tr∆∞·ªùng c·ªßa b·∫°n:\nVITE_API_BASE_URL=https://0nxpvdebt3.execute-api.ap-southeast-1.amazonaws.com/prod VITE_USE_MOCK_DATA=true C·∫≠p nh·∫≠t file c·∫•u h√¨nh src/config/config.js ƒë·ªÉ s·ª≠ d·ª•ng c√°c bi·∫øn m√¥i tr∆∞·ªùng n√†y:\nconst config = { // API Configuration API_BASE_URL: import.meta.env.VITE_API_BASE_URL || \u0026#39;https://0nxpvdebt3.execute-api.ap-southeast-1.amazonaws.com/prod\u0026#39;, // Development mode - set to true to use mock data instead of API USE_MOCK_DATA: import.meta.env.VITE_USE_MOCK_DATA === \u0026#39;true\u0026#39; || false, // Other configurations APP_NAME: \u0026#39;FastFood Order System\u0026#39;, APP_VERSION: \u0026#39;1.0.0\u0026#39;, // Request timeout (in milliseconds) REQUEST_TIMEOUT: 10000, // Auto-refresh intervals (in milliseconds) ORDER_REFRESH_INTERVAL: 30000, // 30 seconds MENU_REFRESH_INTERVAL: 300000, // 5 minutes }; export default config; Thay th·∫ø API URL m·∫∑c ƒë·ªãnh (https://0nxpvdebt3.execute-api.ap-southeast-1.amazonaws.com/prod) b·∫±ng API Gateway invoke URL th·ª±c t·∫ø m√† b·∫°n ƒë√£ t·∫°o cho l·∫ßn tri·ªÉn khai c·ªßa m√¨nh.\nB∆∞·ªõc 2: Build Frontend Ch·∫°y l·ªánh build ƒë·ªÉ t·∫°o ra c√°c t·ªáp s·∫µn s√†ng cho m√¥i tr∆∞·ªùng production:\nnpm run build B∆∞·ªõc 3: T·∫£i th∆∞ m·ª•c Build l√™n S3 M·ªü S3 Console trong AWS. Ch·ªçn S3 bucket ch·ª©a frontend c·ªßa b·∫°n. Nh·∫•p Upload ‚Üí Add folder. Ch·ªçn th∆∞ m·ª•c build t·ª´ d·ª± √°n React c·ªßa b·∫°n. T·∫£i to√†n b·ªô n·ªôi dung b√™n trong th∆∞ m·ª•c build l√™n. Ki·ªÉm tra website b·∫±ng endpoint. "
},
{
	"uri": "/vi/3-eventstore/3.2-create-orderreadmodel-table/",
	"title": "T·∫°o b·∫£ng OrderReadModel",
	"tags": [],
	"description": "",
	"content": "L·∫∑p l·∫°i c√°c b∆∞·ªõc t∆∞∆°ng t·ª± nh∆∞ khi t·∫°o EventStore.\nB∆∞·ªõc 1: T·∫°o b·∫£ng m·ªõi Trong DynamoDB Console, nh·∫•n Create table. Table name: OrderReadModel Partition key: orderId (String) Ch·ªçn Default settings. Nh·∫•n Create table. ‚úÖ K·∫øt qu·∫£: B·∫£ng OrderReadModel ƒë√£ s·∫µn s√†ng ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu ƒë∆°n h√†ng.\n"
},
{
	"uri": "/vi/2-prerequiste/2.3-create-iam-role/",
	"title": "T·∫°o IAM Role",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: M·ªü IAM Console Trong AWS Management Console, t√¨m ki·∫øm IAM. Nh·∫•n v√†o IAM ƒë·ªÉ m·ªü trang qu·∫£n tr·ªã IAM. B∆∞·ªõc 2: T·∫°o Role V√†o Roles ‚Üí Create role.\nTrong Trusted entity type, ch·ªçn AWS service.\nCh·ªçn Lambda l√†m d·ªãch v·ª•.\nNh·∫•n Next.\nNh·∫•n Create Role.\n"
},
{
	"uri": "/vi/4-deploylambda/4.2.-implementfunctionordereventprocessor/",
	"title": "Tri·ªÉn khai OrderEventProcessor",
	"tags": [],
	"description": "",
	"content": "Ti·∫øp theo, ch√∫ng ta s·∫Ω t·∫°o OrderEventProcessor ‚Äî h√†m Lambda ch·ªãu tr√°ch nhi·ªám l·∫Øng nghe c√°c s·ª± ki·ªán ƒë∆°n h√†ng v√† c·∫≠p nh·∫≠t OrderReadModel t∆∞∆°ng ·ª©ng.\nC√°c b∆∞·ªõc t·∫°o h√†m n√†y t∆∞∆°ng t·ª± nh∆∞ ph·∫ßn tr∆∞·ªõc.\nB∆∞·ªõc 1: T·∫°o h√†m Lambda Ch·ªçn Author from scratch. Nh·∫≠p t√™n h√†m: OrderEventProcessor. Ch·ªçn Runtime: Python 3.12. Ch·ªçn Architecture: x86_64. Ch·ªçn Use an existing role v√† ch·ªçn EventSourcingLambdaRole. Nh·∫•n Create function. B∆∞·ªõc 2: Tri·ªÉn khai m√£ h√†m Thay th·∫ø m√£ m·∫∑c ƒë·ªãnh b·∫±ng n·ªôi dung sau: import json import boto3 from decimal import Decimal from datetime import datetime # Initialize AWS clients dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) sns = boto3.client(\u0026#39;sns\u0026#39;) # DynamoDB tables order_table = dynamodb.Table(\u0026#39;OrderReadModel\u0026#39;) customer_table = dynamodb.Table(\u0026#39;CustomerReadModel\u0026#39;) # SNS Topic ARN - Replace with your actual SNS topic ARN SNS_TOPIC_ARN = \u0026#39;arn:aws:sns:ap-southeast-1:218451864254:OrderNotifications\u0026#39; def lambda_handler(event, context): try: print(f\u0026#34;Received event: {json.dumps(event)}\u0026#34;) # Handle EventBridge events if \u0026#39;detail-type\u0026#39; in event and \u0026#39;detail\u0026#39; in event: process_eventbridge_event(event) # Handle direct invocation or other event sources elif \u0026#39;Records\u0026#39; in event: for record in event[\u0026#39;Records\u0026#39;]: if \u0026#39;eventbridge\u0026#39; in record.get(\u0026#39;eventSource\u0026#39;, \u0026#39;\u0026#39;): process_eventbridge_event(json.loads(record[\u0026#39;body\u0026#39;])) else: # Direct EventBridge invocation process_eventbridge_event(event) return {\u0026#39;statusCode\u0026#39;: 200, \u0026#39;body\u0026#39;: \u0026#39;Events processed successfully\u0026#39;} except Exception as e: print(f\u0026#34;Error processing events: {str(e)}\u0026#34;) import traceback traceback.print_exc() return {\u0026#39;statusCode\u0026#39;: 500, \u0026#39;body\u0026#39;: \u0026#39;Error processing events\u0026#39;} def process_eventbridge_event(event_data): detail_type = event_data.get(\u0026#39;detail-type\u0026#39;) detail = event_data.get(\u0026#39;detail\u0026#39;, {}) print(f\u0026#34;Processing event type: {detail_type}\u0026#34;) print(f\u0026#34;Event detail: {detail}\u0026#34;) if detail_type == \u0026#39;OrderPlaced\u0026#39;: handle_order_placed(detail) elif detail_type == \u0026#39;OrderConfirmed\u0026#39;: handle_order_confirmed(detail) elif detail_type == \u0026#39;OrderCancelled\u0026#39;: handle_order_cancelled(detail) else: print(f\u0026#34;Unknown event type: {detail_type}\u0026#34;) def handle_order_placed(detail): try: # Convert float values back to Decimal for DynamoDB items = [] for item in detail.get(\u0026#39;items\u0026#39;, []): items.append({ \u0026#39;itemId\u0026#39;: item[\u0026#39;itemId\u0026#39;], \u0026#39;name\u0026#39;: item[\u0026#39;name\u0026#39;], \u0026#39;price\u0026#39;: Decimal(str(item[\u0026#39;price\u0026#39;])), \u0026#39;quantity\u0026#39;: item[\u0026#39;quantity\u0026#39;], \u0026#39;total\u0026#39;: Decimal(str(item[\u0026#39;total\u0026#39;])) }) # Create order record in read model order_item = { \u0026#39;orderId\u0026#39;: detail[\u0026#39;orderId\u0026#39;], \u0026#39;customerName\u0026#39;: detail[\u0026#39;customerName\u0026#39;], \u0026#39;customerPhone\u0026#39;: detail[\u0026#39;customerPhone\u0026#39;], \u0026#39;customerAddress\u0026#39;: detail[\u0026#39;customerAddress\u0026#39;], \u0026#39;items\u0026#39;: items, \u0026#39;totalAmount\u0026#39;: Decimal(str(detail[\u0026#39;totalAmount\u0026#39;])), \u0026#39;status\u0026#39;: \u0026#39;PLACED\u0026#39;, \u0026#39;createdAt\u0026#39;: detail.get(\u0026#39;timestamp\u0026#39;, datetime.utcnow().isoformat()), \u0026#39;updatedAt\u0026#39;: detail.get(\u0026#39;timestamp\u0026#39;, datetime.utcnow().isoformat()) } order_table.put_item(Item=order_item) print(f\u0026#34;Order {detail[\u0026#39;orderId\u0026#39;]} created in read model\u0026#34;) # Update customer record customer_id = detail[\u0026#39;customerPhone\u0026#39;] # Use phone as customer ID try: customer_table.update_item( Key={\u0026#39;customerId\u0026#39;: customer_id}, UpdateExpression=\u0026#39;SET customerName = :name, customerPhone = :phone, totalOrders = if_not_exists(totalOrders, :zero) + :one, updatedAt = :updated\u0026#39;, ExpressionAttributeValues={ \u0026#39;:name\u0026#39;: detail[\u0026#39;customerName\u0026#39;], \u0026#39;:phone\u0026#39;: detail[\u0026#39;customerPhone\u0026#39;], \u0026#39;:zero\u0026#39;: 0, \u0026#39;:one\u0026#39;: 1, \u0026#39;:updated\u0026#39;: datetime.utcnow().isoformat() } ) print(f\u0026#34;Customer {customer_id} updated\u0026#34;) except Exception as e: print(f\u0026#34;Error updating customer: {str(e)}\u0026#34;) # G·ª≠i th√¥ng b√°o cho admin send_notification( f\u0026#34;[ADMIN] New Order Placed - #{detail[\u0026#39;orderId\u0026#39;][:8]}\u0026#34;, ( f\u0026#34;A new customer order has been placed.\\n\u0026#34; f\u0026#34;Order ID: {detail[\u0026#39;orderId\u0026#39;]}\\n\u0026#34; f\u0026#34;Customer: {detail[\u0026#39;customerName\u0026#39;]}\\n\u0026#34; f\u0026#34;Phone: {detail[\u0026#39;customerPhone\u0026#39;]}\\n\u0026#34; f\u0026#34;Total: ${detail[\u0026#39;totalAmount\u0026#39;]:.2f}\\n\u0026#34; f\u0026#34;Status: PLACED\u0026#34; ) ) except Exception as e: print(f\u0026#34;Error handling OrderPlaced: {str(e)}\u0026#34;) import traceback traceback.print_exc() raise def handle_order_confirmed(detail): try: order_table.update_item( Key={\u0026#39;orderId\u0026#39;: detail[\u0026#39;orderId\u0026#39;]}, UpdateExpression=\u0026#39;SET #status = :status, confirmedAt = :confirmed_at, estimatedDelivery = :estimated, updatedAt = :updated\u0026#39;, ExpressionAttributeNames={\u0026#39;#status\u0026#39;: \u0026#39;status\u0026#39;}, ExpressionAttributeValues={ \u0026#39;:status\u0026#39;: \u0026#39;CONFIRMED\u0026#39;, \u0026#39;:confirmed_at\u0026#39;: detail.get(\u0026#39;confirmedAt\u0026#39;), \u0026#39;:estimated\u0026#39;: detail.get(\u0026#39;estimatedDelivery\u0026#39;), \u0026#39;:updated\u0026#39;: datetime.utcnow().isoformat() } ) print(f\u0026#34;Order {detail[\u0026#39;orderId\u0026#39;]} confirmed\u0026#34;) # G·ª≠i th√¥ng b√°o cho admin send_notification( f\u0026#34;[ADMIN] Order Confirmed - #{detail[\u0026#39;orderId\u0026#39;][:8]}\u0026#34;, ( f\u0026#34;Customer order has been confirmed.\\n\u0026#34; f\u0026#34;Order ID: {detail[\u0026#39;orderId\u0026#39;]}\\n\u0026#34; f\u0026#34;Estimated Delivery: {detail.get(\u0026#39;estimatedDelivery\u0026#39;, \u0026#39;TBD\u0026#39;)}\u0026#34; ) ) except Exception as e: print(f\u0026#34;Error handling OrderConfirmed: {str(e)}\u0026#34;) import traceback traceback.print_exc() raise def handle_order_cancelled(detail): try: order_table.update_item( Key={\u0026#39;orderId\u0026#39;: detail[\u0026#39;orderId\u0026#39;]}, UpdateExpression=\u0026#39;SET #status = :status, cancelledAt = :cancelled_at, cancelReason = :reason, updatedAt = :updated\u0026#39;, ExpressionAttributeNames={\u0026#39;#status\u0026#39;: \u0026#39;status\u0026#39;}, ExpressionAttributeValues={ \u0026#39;:status\u0026#39;: \u0026#39;CANCELLED\u0026#39;, \u0026#39;:cancelled_at\u0026#39;: detail.get(\u0026#39;cancelledAt\u0026#39;), \u0026#39;:reason\u0026#39;: detail.get(\u0026#39;reason\u0026#39;), \u0026#39;:updated\u0026#39;: datetime.utcnow().isoformat() } ) print(f\u0026#34;Order {detail[\u0026#39;orderId\u0026#39;]} cancelled\u0026#34;) # G·ª≠i th√¥ng b√°o cho admin send_notification( f\u0026#34;[ADMIN] Order Cancelled - #{detail[\u0026#39;orderId\u0026#39;][:8]}\u0026#34;, ( f\u0026#34;Customer order has been cancelled.\\n\u0026#34; f\u0026#34;Order ID: {detail[\u0026#39;orderId\u0026#39;]}\\n\u0026#34; f\u0026#34;Reason: {detail.get(\u0026#39;reason\u0026#39;, \u0026#39;No reason provided\u0026#39;)}\u0026#34; ) ) except Exception as e: print(f\u0026#34;Error handling OrderCancelled: {str(e)}\u0026#34;) import traceback traceback.print_exc() raise def send_notification(subject, message): try: print(f\u0026#34;NOTIFICATION - {subject}: {message}\u0026#34;) sns.publish( TopicArn=SNS_TOPIC_ARN, Subject=str(subject), Message=str(message) ) except Exception as e: print(f\u0026#34;Error sending notification: {str(e)}\u0026#34;) import traceback traceback.print_exc() # Kh√¥ng raise ƒë·ªÉ Lambda ti·∫øp t·ª•c ch·∫°y Nh·∫•n Deploy ƒë·ªÉ l∆∞u m√£ h√†m.\n‚úÖ H√†m Lambda OrderEventProcessor hi·ªán ƒë√£ s·∫µn s√†ng ƒë·ªÉ x·ª≠ l√Ω c√°c s·ª± ki·ªán ƒë∆°n h√†ng v√† c·∫≠p nh·∫≠t read model.\n"
},
{
	"uri": "/vi/3-eventstore/3.3-create-customerreadmodel-table/",
	"title": "T·∫°o b·∫£ng CustomerReadModel",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: T·∫°o b·∫£ng m·ªõi Trong DynamoDB Console, nh·∫•n Create table. Table name: CustomerReadModel Partition key: customerId (String) Ch·ªçn Default settings. Nh·∫•n Create table. ‚úÖ K·∫øt qu·∫£: B·∫£ng CustomerReadModel ƒë√£ s·∫µn s√†ng ƒë·ªÉ l∆∞u tr·ªØ th√¥ng tin kh√°ch h√†ng.\n"
},
{
	"uri": "/vi/7-deployfrontend/7.3-create-cloudfrontdistributionandapplyittothewebsite/",
	"title": "T·∫°o CloudFront Distribution v√† √Åp d·ª•ng cho Website",
	"tags": [],
	"description": "",
	"content": "T·∫°o CloudFront Distribution ƒë·ªÉ Ph√¢n Ph·ªëi N·ªôi Dung To√†n C·∫ßu CloudFront l√† m·∫°ng ph√¢n ph·ªëi n·ªôi dung (CDN) c·ªßa Amazon gi√∫p tƒÉng t·ªëc ph√¢n ph·ªëi n·ªôi dung web tƒ©nh v√† ƒë·ªông c·ªßa b·∫°n t·ªõi ng∆∞·ªùi d√πng tr√™n to√†n th·∫ø gi·ªõi. Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω t·∫°o m·ªôt CloudFront distribution cho ·ª©ng d·ª•ng React c·ªßa m√¨nh.\nB∆∞·ªõc 1: Truy c·∫≠p D·ªãch v·ª• CloudFront ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn AWS Management Console v√† t√¨m ki·∫øm \u0026ldquo;CloudFront\u0026rdquo; trong thanh t√¨m ki·∫øm. Nh·∫•p v√†o CloudFront ƒë·ªÉ m·ªü b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª•. Nh·∫•p Create a CloudFront distribution ƒë·ªÉ b·∫Øt ƒë·∫ßu qu√° tr√¨nh thi·∫øt l·∫≠p. B∆∞·ªõc 2: C·∫•u h√¨nh Distribution T√πy ch·ªçn Distribution\nDistribution name: Nh·∫≠p t√™n m√¥ t·∫£ cho distribution c·ªßa b·∫°n: fastfood-react-app Description (t√πy ch·ªçn): Th√™m m√¥ t·∫£ ng·∫Øn g·ªçn: FastFood Order System - React App Distribution type: Ch·ªçn Single website or app v√¨ ch√∫ng ta ƒëang tri·ªÉn khai m·ªôt ·ª©ng d·ª•ng React duy nh·∫•t. T√™n mi·ªÅn t√πy ch·ªânh (Optional)\nN·∫øu b·∫°n c√≥ t√™n mi·ªÅn ri√™ng, b·∫°n c√≥ th·ªÉ c·∫•u h√¨nh ·ªü ƒë√¢y. N·∫øu kh√¥ng, h√£y ƒë·ªÉ tr·ªëng ƒë·ªÉ s·ª≠ d·ª•ng t√™n mi·ªÅn m·∫∑c ƒë·ªãnh c·ªßa CloudFront.\nDomain (t√πy ch·ªçn): ƒê·ªÉ tr·ªëng ho·∫∑c nh·∫≠p t√™n mi·ªÅn t√πy ch·ªânh n·∫øu b·∫°n c√≥. Nh·∫•p Check domain n·∫øu b·∫°n ƒë√£ nh·∫≠p t√™n mi·ªÅn ƒë·ªÉ ki·ªÉm tra t√≠nh kh·∫£ d·ª•ng. B∆∞·ªõc 3: Ch·ªâ ƒë·ªãnh C·∫•u h√¨nh Origin Origin l√† n∆°i CloudFront l·∫•y n·ªôi dung c·ªßa b·∫°n ‚Äî trong tr∆∞·ªùng h·ª£p n√†y l√† S3 bucket.\nOrigin type: Ch·ªçn Amazon S3 v√¨ ch√∫ng ta s·∫Ω ph·ª•c v·ª• n·ªôi dung t·ª´ S3 bucket. S3 origin: Nh·∫≠p endpoint c·ªßa S3 bucket:\nevent-sourcing-fastfood-frontend-s3-website-ap-southeast-1.amazonaws.com Origin path (t√πy ch·ªçn): Gi·ªØ nguy√™n /path ho·∫∑c ch·ªânh s·ª≠a n·∫øu n·ªôi dung c·ªßa b·∫°n n·∫±m trong th∆∞ m·ª•c con. B∆∞·ªõc 4: C·∫•u h√¨nh B·∫£o m·∫≠t Web Application Firewall (WAF)\nTrong h∆∞·ªõng d·∫´n n√†y, ch√∫ng ta s·∫Ω t·∫Øt WAF ƒë·ªÉ gi·∫£m chi ph√≠:\nWeb Application Firewall (WAF): Ch·ªçn Do not enable security protections. T√πy ch·ªçn n√†y ph√π h·ª£p cho m√¥i tr∆∞·ªùng ph√°t tri·ªÉn v√† th·ª≠ nghi·ªám. V·ªõi ·ª©ng d·ª•ng s·∫£n xu·∫•t, h√£y c√¢n nh·∫Øc b·∫≠t WAF ƒë·ªÉ tƒÉng c∆∞·ªùng b·∫£o m·∫≠t. B∆∞·ªõc 5: Xem l·∫°i v√† T·∫°o Distribution Xem l·∫°i to√†n b·ªô c·∫•u h√¨nh ƒë·ªÉ ƒë·∫£m b·∫£o ch√≠nh x√°c. Nh·∫•p Next ƒë·ªÉ ti·∫øp t·ª•c sang trang xem l·∫°i cu·ªëi c√πng. Nh·∫•p Create distribution ƒë·ªÉ tri·ªÉn khai CloudFront distribution. Qu√° tr√¨nh tri·ªÉn khai CloudFront distribution th∆∞·ªùng m·∫•t 15‚Äì20 ph√∫t. Tr·∫°ng th√°i s·∫Ω chuy·ªÉn t·ª´ Deploying sang Enabled khi ho√†n t·∫•t.\nC·∫≠p nh·∫≠t Bucket Policy c·ªßa S3 Quay l·∫°i S3 bucket: event-sourcing-fastfood-frontend V√†o tab Permissions Nh·∫•p v√†o Bucket policy ƒë·ªÉ ch·ªânh s·ª≠a policy hi·ªán t·∫°i C·∫≠p nh·∫≠t policy ƒë·ªÉ bao g·ªìm quy·ªÅn truy c·∫≠p t·ª´ CloudFront\nPolicy sau khi c·∫≠p nh·∫≠t s·∫Ω nh∆∞ sau: { \u0026#34;Version\u0026#34;: \u0026#34;2012-10-17\u0026#34;, \u0026#34;Statement\u0026#34;: [ { \u0026#34;Sid\u0026#34;: \u0026#34;PublicReadGetObject\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::event-sourcing-fastfood-frontend/*\u0026#34; }, { \u0026#34;Sid\u0026#34;: \u0026#34;AllowCloudFrontServicePrincipal\u0026#34;, \u0026#34;Effect\u0026#34;: \u0026#34;Allow\u0026#34;, \u0026#34;Principal\u0026#34;: { \u0026#34;Service\u0026#34;: \u0026#34;cloudfront.amazonaws.com\u0026#34; }, \u0026#34;Action\u0026#34;: \u0026#34;s3:GetObject\u0026#34;, \u0026#34;Resource\u0026#34;: \u0026#34;arn:aws:s3:::event-sourcing-fastfood-frontend/*\u0026#34;, \u0026#34;Condition\u0026#34;: { \u0026#34;StringEquals\u0026#34;: { \u0026#34;AWS:SourceArn\u0026#34;: \u0026#34;arn:aws:cloudfront::218453064234:distribution/E2MQTT186060K\u0026#34; } } } ] } Nh·∫•p Save changes ƒë·ªÉ √°p d·ª•ng policy ƒë√£ c·∫≠p nh·∫≠t\nTruy c·∫≠p ·ª®ng d·ª•ng c·ªßa B·∫°n qua CloudFront Khi CloudFront distribution ƒë√£ ƒë∆∞·ª£c tri·ªÉn khai v√† bucket policy ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t, b·∫°n c√≥ th·ªÉ truy c·∫≠p ·ª©ng d·ª•ng React th√¥ng qua URL c·ªßa CloudFront.\nKi·ªÉm tra CloudFront Distribution\nSao ch√©p Distribution domain name t·ª´ b·∫£ng ƒëi·ªÅu khi·ªÉn CloudFront (v√≠ d·ª•: d26xve6snn0mdw.cloudfront.net) M·ªü m·ªôt tab tr√¨nh duy·ªát m·ªõi v√† truy c·∫≠p v√†o URL CloudFront X√°c minh r·∫±ng h·ªá th·ªëng Fast Food c·ªßa b·∫°n hi·ªÉn th·ªã ch√≠nh x√°c B·∫°n s·∫Ω th·∫•y ·ª©ng d·ª•ng React c·ªßa m√¨nh nh∆∞ sau:\n"
},
{
	"uri": "/vi/5-setupeventbridge/5.2-create-sns-topic-for-notifications/",
	"title": "T·∫°o SNS Topic cho Th√¥ng b√°o",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω t·∫°o m·ªôt SNS (Simple Notification Service) Topic\nƒë·ªÉ x·ª≠ l√Ω c√°c th√¥ng b√°o ƒë∆∞·ª£c k√≠ch ho·∫°t b·ªüi c√°c s·ª± ki·ªán ƒë∆°n h√†ng.\nTopic n√†y s·∫Ω ƒë√≥ng vai tr√≤ l√† trung t√¢m truy·ªÅn th√¥ng ƒë·ªÉ ph√°t ƒëi c√°c c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng t·ªõi nh·ªØng ng∆∞·ªùi ƒëƒÉng k√Ω,\nh·ªó tr·ª£ ki·∫øn tr√∫c Event Sourcing b·∫±ng c√°ch cung c·∫•p th√¥ng b√°o th·ªùi gian th·ª±c khi c√°c s·ª± ki·ªán domain x·∫£y ra.\nB∆∞·ªõc 1: Truy c·∫≠p SNS Console Trong AWS Management Console, t√¨m ki·∫øm t·ª´ kh√≥a SNS. Nh·∫•n Simple Notification Service ƒë·ªÉ m·ªü d·ªãch v·ª•. B∆∞·ªõc 2: T·∫°o SNS Topic Trong SNS console, ch·ªçn Topics ·ªü b·∫£ng ƒëi·ªÅu h∆∞·ªõng b√™n tr√°i. Nh·∫•n Create topic. B∆∞·ªõc 3: C·∫•u h√¨nh chi ti·∫øt Topic Type: Ch·ªçn Standard (khuy·∫øn ngh·ªã cho hi·ªáu su·∫•t cao v√† s·∫Øp x·∫øp th√¥ng ƒëi·ªáp theo ki·ªÉu ‚Äúbest-effort‚Äù) Name: Nh·∫≠p OrderNotifications Display name: Nh·∫≠p Order Notifications (t√πy ch·ªçn ‚Äì d√πng cho subscription qua SMS) Gi·ªØ nguy√™n c√°c thi·∫øt l·∫≠p kh√°c m·∫∑c ƒë·ªãnh. Nh·∫•n Create topic. ‚úÖ K·∫øt qu·∫£: Topic OrderNotifications ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng v√† s·∫µn s√†ng x·ª≠ l√Ω th√¥ng b√°o.\nB∆∞·ªõc 4: T·∫°o Email Subscription ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn topic OrderNotifications v·ª´a t·∫°o. Nh·∫•n Create subscription. B∆∞·ªõc 5: C·∫•u h√¨nh chi ti·∫øt Subscription Topic ARN: T·ª± ƒë·ªông hi·ªÉn th·ªã ARN c·ªßa topic OrderNotifications Protocol: Ch·ªçn Email Endpoint: Nh·∫≠p ƒë·ªãa ch·ªâ email c·ªßa b·∫°n (v√≠ d·ª•: your-email@gmail.com) Gi·ªØ nguy√™n c√°c thi·∫øt l·∫≠p t√πy ch·ªçn kh√°c. Nh·∫•n Create subscription. B∆∞·ªõc 6: X√°c nh·∫≠n Email Subscription M·ªü h·ªôp th∆∞ email c·ªßa b·∫°n v√† t√¨m email t·ª´ AWS Notifications ‚Äì Subscription Confirmation. Nh·∫•n Confirm subscription trong email ƒë·ªÉ k√≠ch ho·∫°t ƒëƒÉng k√Ω. Sau khi x√°c nh·∫≠n, tr·∫°ng th√°i c·ªßa subscription s·∫Ω chuy·ªÉn sang Confirmed. B∆∞·ªõc 7: Li√™n k·∫øt SNS Topic ARN v·ªõi Lambda Sau khi t·∫°o SNS topic v√† x√°c nh·∫≠n subscription, b·∫°n c·∫ßn li√™n k·∫øt n√≥ v·ªõi h√†m Lambda OrderEventProcessor\nƒë·ªÉ Lambda c√≥ th·ªÉ g·ª≠i th√¥ng b√°o.\nM·ªü AWS Lambda Console v√† t√¨m t·ªõi h√†m OrderEventProcessor. Trong tab Code, t√¨m bi·∫øn SNS_TOPIC_ARN. Thay th·∫ø gi√° tr·ªã placeholder b·∫±ng ARN c·ªßa SNS topic v·ª´a t·∫°o. "
},
{
	"uri": "/vi/3-eventstore/",
	"title": "Thi·∫øt l·∫≠p Event Store &amp; Read Models (DynamoDB)",
	"tags": [],
	"description": "",
	"content": "Trong b∆∞·ªõc n√†y, ch√∫ng ta s·∫Ω t·∫°o c√°c b·∫£ng DynamoDB c·∫ßn thi·∫øt cho ki·∫øn tr√∫c Event Sourcing v√† kh·ªüi t·∫°o d·ªØ li·ªáu ban ƒë·∫ßu cho b·∫£ng MenuItems.\nN·ªôi dung 3.1. T·∫°o b·∫£ng EventStore 3.2. T·∫°o b·∫£ng OrderReadModel 3.3. T·∫°o b·∫£ng CustomerReadModel 3.4. T·∫°o b·∫£ng MenuItems 3.5. Kh·ªüi t·∫°o d·ªØ li·ªáu cho MenuItems\n"
},
{
	"uri": "/vi/6-configapigateway/6.3-deploy-api/",
	"title": "Tri·ªÉn khai API",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω tri·ªÉn khai API Gateway ƒë√£ c·∫•u h√¨nh ƒë·ªÉ c√≥ th·ªÉ truy c·∫≠p t·ª´ client th√¥ng qua m·ªôt URL c√¥ng khai.\nB∆∞·ªõc 1: Tri·ªÉn khai API Trong API Gateway Console, nh·∫•p Actions ‚Üí Deploy API.\nC·∫•u h√¨nh th√¥ng tin tri·ªÉn khai:\nDeployment stage: Ch·ªçn [New Stage]. Stage name: Nh·∫≠p prod. Stage description: Nh·∫≠p Production stage. Deployment description: Nh·∫≠p Initial deployment. Nh·∫•p Deploy.\nB∆∞·ªõc 2: L∆∞u API URL Sau khi tri·ªÉn khai, Invoke URL s·∫Ω xu·∫•t hi·ªán ·ªü ph√≠a tr√™n.\nH√£y sao ch√©p v√† l∆∞u l·∫°i URL n√†y ƒë·ªÉ s·ª≠ d·ª•ng sau trong ·ª©ng d·ª•ng client.\nV√≠ d·ª•:\nhttps://your-api-id.execute-api.ap-southeast-1.amazonaws.com/prod "
},
{
	"uri": "/vi/4-deploylambda/4.3.-implementfunctionorderqueryhandler/",
	"title": "Tri·ªÉn khai OrderQueryHandler",
	"tags": [],
	"description": "",
	"content": "Ti·∫øp theo, ch√∫ng ta s·∫Ω t·∫°o h√†m Lambda OrderQueryHandler ƒë·ªÉ x·ª≠ l√Ω c√°c y√™u c·∫ßu truy v·∫•n v√† l·∫•y th√¥ng tin chi ti·∫øt ƒë∆°n h√†ng t·ª´ OrderReadModel.\nC√°c b∆∞·ªõc t·∫°o h√†m n√†y t∆∞∆°ng t·ª± nh∆∞ nh·ªØng ph·∫ßn tr∆∞·ªõc.\nB∆∞·ªõc 1: T·∫°o h√†m Lambda Ch·ªçn Author from scratch. Nh·∫≠p t√™n h√†m: OrderQueryHandler. Ch·ªçn Runtime: Python 3.12. Ch·ªçn Architecture: x86_64. Ch·ªçn Use an existing role v√† ch·ªçn EventSourcingLambdaRole. Nh·∫•n Create function.\nB∆∞·ªõc 2: Tri·ªÉn khai m√£ h√†m Thay th·∫ø m√£ m·∫∑c ƒë·ªãnh b·∫±ng ƒëo·∫°n m√£ sau: import json import boto3 from boto3.dynamodb.conditions import Key from decimal import Decimal # Initialize DynamoDB dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) order_table = dynamodb.Table(\u0026#39;OrderReadModel\u0026#39;) customer_table = dynamodb.Table(\u0026#39;CustomerReadModel\u0026#39;) menu_items_table = dynamodb.Table(\u0026#39;MenuItems\u0026#39;) class DecimalEncoder(json.JSONEncoder): def default(self, o): if isinstance(o, Decimal): return float(o) return super(DecimalEncoder, self).default(o) def lambda_handler(event, context): try: http_method = event[\u0026#39;httpMethod\u0026#39;] path = event[\u0026#39;path\u0026#39;] query_params = event.get(\u0026#39;queryStringParameters\u0026#39;) or {} print(f\u0026#34;Processing {http_method} {path}\u0026#34;) print(f\u0026#34;Query params: {query_params}\u0026#34;) if path == \u0026#39;/orders\u0026#39; and http_method == \u0026#39;GET\u0026#39;: return handle_get_orders(query_params) elif path.startswith(\u0026#39;/orders/\u0026#39;) and http_method == \u0026#39;GET\u0026#39;: order_id = path.split(\u0026#39;/\u0026#39;)[-1] return handle_get_order(order_id) elif path == \u0026#39;/menu\u0026#39; and http_method == \u0026#39;GET\u0026#39;: return handle_get_menu() elif path == \u0026#39;/customers\u0026#39; and http_method == \u0026#39;GET\u0026#39;: return handle_get_customers(query_params) else: return build_response(404, {\u0026#39;error\u0026#39;: \u0026#39;Endpoint not found\u0026#39;}) except Exception as e: print(f\u0026#34;Error: {str(e)}\u0026#34;) import traceback traceback.print_exc() return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Internal server error\u0026#39;}) def handle_get_orders(query_params): try: # Get all orders (in production, you\u0026#39;d want pagination) response = order_table.scan( Limit=50 # Limit to 50 orders ) orders = response.get(\u0026#39;Items\u0026#39;, []) # Sort by createdAt descending orders.sort(key=lambda x: x.get(\u0026#39;createdAt\u0026#39;, \u0026#39;\u0026#39;), reverse=True) return build_response(200, { \u0026#39;orders\u0026#39;: orders, \u0026#39;count\u0026#39;: len(orders) }) except Exception as e: print(f\u0026#34;Error getting orders: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to get orders\u0026#39;}) def handle_get_order(order_id): try: response = order_table.get_item(Key={\u0026#39;orderId\u0026#39;: order_id}) if \u0026#39;Item\u0026#39; in response: return build_response(200, response[\u0026#39;Item\u0026#39;]) else: return build_response(404, {\u0026#39;error\u0026#39;: \u0026#39;Order not found\u0026#39;}) except Exception as e: print(f\u0026#34;Error getting order: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to get order\u0026#39;}) def handle_get_menu(): try: response = menu_items_table.scan() items = response.get(\u0026#39;Items\u0026#39;, []) # Filter only available items available_items = [item for item in items if item.get(\u0026#39;available\u0026#39;, False)] return build_response(200, { \u0026#39;items\u0026#39;: available_items, \u0026#39;count\u0026#39;: len(available_items) }) except Exception as e: print(f\u0026#34;Error getting menu: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to get menu\u0026#39;}) def handle_get_customers(query_params): try: response = customer_table.scan( Limit=50 # Limit to 50 customers ) customers = response.get(\u0026#39;Items\u0026#39;, []) return build_response(200, { \u0026#39;customers\u0026#39;: customers, \u0026#39;count\u0026#39;: len(customers) }) except Exception as e: print(f\u0026#34;Error getting customers: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to get customers\u0026#39;}) def build_response(status_code, body): return { \u0026#39;statusCode\u0026#39;: status_code, \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39;, \u0026#39;Access-Control-Allow-Methods\u0026#39;: \u0026#39;GET, POST, PUT, DELETE, OPTIONS\u0026#39;, \u0026#39;Access-Control-Allow-Headers\u0026#39;: \u0026#39;Content-Type, Authorization\u0026#39; }, \u0026#39;body\u0026#39;: json.dumps(body, cls=DecimalEncoder, default=str) } Nh·∫•n Deploy ƒë·ªÉ l∆∞u m√£ h√†m. ‚úÖ H√†m Lambda OrderQueryHandler ƒë√£ s·∫µn s√†ng ƒë·ªÉ x·ª≠ l√Ω c√°c y√™u c·∫ßu truy v·∫•n ƒë∆°n h√†ng.\n"
},
{
	"uri": "/vi/3-eventstore/3.4-create-menuitems-table/",
	"title": "T·∫°o b·∫£ng MenuItems",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: T·∫°o b·∫£ng m·ªõi Trong DynamoDB Console, nh·∫•n Create table. Table name: MenuItems Partition key: itemId (String) Ch·ªçn Default settings. Nh·∫•n Create table. ‚úÖ K·∫øt qu·∫£: B·∫£ng MenuItems ƒë√£ s·∫µn s√†ng ƒë·ªÉ l∆∞u tr·ªØ d·ªØ li·ªáu th·ª±c ƒë∆°n.\n"
},
{
	"uri": "/vi/4-deploylambda/",
	"title": "Tri·ªÉn khai Lambda Functions",
	"tags": [],
	"description": "",
	"content": "Trong b∆∞·ªõc n√†y, ch√∫ng ta s·∫Ω tri·ªÉn khai b·ªën Lambda function c·ªët l√µi t·∫°o th√†nh x∆∞∆°ng s·ªëng cho h·ªá th·ªëng ƒë·∫∑t h√†ng theo m√¥ h√¨nh Event Sourcing.\nN·ªôi dung 4.1. Tri·ªÉn khai h√†m OrderCommandHandler\n4.2. Tri·ªÉn khai h√†m OrderEventProcessor\n4.3. Tri·ªÉn khai h√†m OrderQueryHandler\n4.4. Tri·ªÉn khai h√†m State Reconstruction Handler\n"
},
{
	"uri": "/vi/4-deploylambda/4.4.-implementfunctionstatereconstructionhandler/",
	"title": "Tri·ªÉn khai State Reconstruction Handler",
	"tags": [],
	"description": "",
	"content": "Cu·ªëi c√πng, ch√∫ng ta s·∫Ω tri·ªÉn khai h√†m Lambda State Reconstruction Handler.\nH√†m n√†y s·∫Ω kh√¥i ph·ª•c tr·∫°ng th√°i hi·ªán t·∫°i c·ªßa m·ªôt ƒë∆°n h√†ng b·∫±ng c√°ch ph√°t l·∫°i c√°c s·ª± ki·ªán t·ª´ Event Store, ƒë·∫£m b·∫£o tr·∫°ng th√°i h·ªá th·ªëng lu√¥n nh·∫•t qu√°n v·ªõi chu·ªói s·ª± ki·ªán ƒë√£ x·∫£y ra.\nC√°c b∆∞·ªõc t·∫°o h√†m t∆∞∆°ng t·ª± nh∆∞ c√°c Lambda function tr∆∞·ªõc ƒë√≥.\nB∆∞·ªõc 1: T·∫°o Lambda Function Ch·ªçn Author from scratch. Nh·∫≠p t√™n h√†m: StateReconstructionHandler. Ch·ªçn Runtime: Python 3.12. Ch·ªçn Architecture: x86_64. Ch·ªçn Use an existing role v√† ch·ªçn EventSourcingLambdaRole. Nh·∫•n Create function. B∆∞·ªõc 2: Vi·∫øt m√£ cho h√†m Thay th·∫ø m√£ m·∫∑c ƒë·ªãnh b·∫±ng n·ªôi dung sau: import json import boto3 from boto3.dynamodb.conditions import Key from decimal import Decimal from datetime import datetime # Initialize DynamoDB dynamodb = boto3.resource(\u0026#39;dynamodb\u0026#39;) event_store_table = dynamodb.Table(\u0026#39;EventStore\u0026#39;) order_table = dynamodb.Table(\u0026#39;OrderReadModel\u0026#39;) class DecimalEncoder(json.JSONEncoder): def default(self, o): if isinstance(o, Decimal): return float(o) return super(DecimalEncoder, self).default(o) def lambda_handler(event, context): \u0026#34;\u0026#34;\u0026#34; State Reconstruction Handler - HTTP request: rebuild theo API path - EventBridge event: rebuild ngay cho order li√™n quan \u0026#34;\u0026#34;\u0026#34; try: print(\u0026#34;Received event:\u0026#34;, json.dumps(event)) http_method = None path = None body = {} # Tr∆∞·ªùng h·ª£p API Gateway REST API if \u0026#39;httpMethod\u0026#39; in event: http_method = event[\u0026#39;httpMethod\u0026#39;] path = event.get(\u0026#39;path\u0026#39;) body = json.loads(event.get(\u0026#39;body\u0026#39;) or \u0026#34;{}\u0026#34;) # Tr∆∞·ªùng h·ª£p API Gateway HTTP API (v2 payload) elif event.get(\u0026#39;requestContext\u0026#39;, {}).get(\u0026#39;http\u0026#39;, {}).get(\u0026#39;method\u0026#39;): http_method = event[\u0026#39;requestContext\u0026#39;][\u0026#39;http\u0026#39;][\u0026#39;method\u0026#39;] path = event.get(\u0026#39;rawPath\u0026#39;) body = json.loads(event.get(\u0026#39;body\u0026#39;) or \u0026#34;{}\u0026#34;) # Tr∆∞·ªùng h·ª£p EventBridge event elif event.get(\u0026#34;detail-type\u0026#34;) in [\u0026#34;OrderPlaced\u0026#34;, \u0026#34;OrderConfirmed\u0026#34;, \u0026#34;OrderCancelled\u0026#34;]: order_id = event.get(\u0026#34;detail\u0026#34;, {}).get(\u0026#34;orderId\u0026#34;) if not order_id: print(\u0026#34;No orderId in event, skipping reconstruction.\u0026#34;) return build_response(400, {\u0026#34;error\u0026#34;: \u0026#34;orderId not found in event\u0026#34;}) print(f\u0026#34;Rebuilding state for orderId from EventBridge: {order_id}\u0026#34;) events = get_events_for_order(order_id) if not events: return build_response(404, {\u0026#34;error\u0026#34;: f\u0026#34;No events found for order {order_id}\u0026#34;}) reconstructed_state = reconstruct_order_state(events) update_read_model(reconstructed_state) return build_response(200, { \u0026#34;message\u0026#34;: f\u0026#34;State rebuilt from EventBridge event for order {order_id}\u0026#34;, \u0026#34;orderId\u0026#34;: order_id, \u0026#34;eventsProcessed\u0026#34;: len(events), \u0026#34;reconstructedState\u0026#34;: reconstructed_state }) else: print(\u0026#34;Unknown event source, skipping.\u0026#34;) return build_response(200, {\u0026#34;message\u0026#34;: \u0026#34;Event ignored\u0026#34;}) # X·ª≠ l√Ω HTTP request nh∆∞ c≈© print(f\u0026#34;Processing {http_method} {path}\u0026#34;) if path == \u0026#39;/reconstruct/order\u0026#39; and http_method == \u0026#39;POST\u0026#39;: return handle_reconstruct_order(body) elif path == \u0026#39;/reconstruct/all\u0026#39; and http_method == \u0026#39;POST\u0026#39;: return handle_reconstruct_all_orders(body) elif path == \u0026#39;/reconstruct/validate\u0026#39; and http_method == \u0026#39;POST\u0026#39;: return handle_validate_reconstruction(body) else: return build_response(404, {\u0026#39;error\u0026#39;: \u0026#39;Endpoint not found\u0026#39;}) except Exception as e: print(f\u0026#34;Error: {str(e)}\u0026#34;) import traceback traceback.print_exc() return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Internal server error\u0026#39;}) def handle_reconstruct_order(body): \u0026#34;\u0026#34;\u0026#34;Reconstruct a single order from events\u0026#34;\u0026#34;\u0026#34; order_id = body.get(\u0026#39;orderId\u0026#39;) if not order_id: return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;orderId is required\u0026#39;}) try: # Get all events for this order events = get_events_for_order(order_id) if not events: return build_response(404, {\u0026#39;error\u0026#39;: \u0026#39;No events found for order\u0026#39;}) # Reconstruct state from events reconstructed_state = reconstruct_order_state(events) # Update read model update_read_model(reconstructed_state) return build_response(200, { \u0026#39;message\u0026#39;: \u0026#39;Order state reconstructed successfully\u0026#39;, \u0026#39;orderId\u0026#39;: order_id, \u0026#39;eventsProcessed\u0026#39;: len(events), \u0026#39;reconstructedState\u0026#39;: reconstructed_state }) except Exception as e: print(f\u0026#34;Error reconstructing order {order_id}: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to reconstruct order\u0026#39;}) def handle_reconstruct_all_orders(body): \u0026#34;\u0026#34;\u0026#34;Reconstruct all orders from events\u0026#34;\u0026#34;\u0026#34; max_orders = body.get(\u0026#39;maxOrders\u0026#39;, 100) # Limit for safety try: # Get all unique aggregate IDs from event store response = event_store_table.scan( ProjectionExpression=\u0026#39;aggregateId\u0026#39;, Limit=max_orders ) order_ids = list(set([item[\u0026#39;aggregateId\u0026#39;] for item in response.get(\u0026#39;Items\u0026#39;, [])])) reconstructed_orders = [] errors = [] for order_id in order_ids: try: events = get_events_for_order(order_id) if events: reconstructed_state = reconstruct_order_state(events) update_read_model(reconstructed_state) reconstructed_orders.append({ \u0026#39;orderId\u0026#39;: order_id, \u0026#39;eventsProcessed\u0026#39;: len(events) }) except Exception as e: errors.append({ \u0026#39;orderId\u0026#39;: order_id, \u0026#39;error\u0026#39;: str(e) }) return build_response(200, { \u0026#39;message\u0026#39;: f\u0026#39;Reconstructed {len(reconstructed_orders)} orders\u0026#39;, \u0026#39;reconstructedOrders\u0026#39;: reconstructed_orders, \u0026#39;errors\u0026#39;: errors }) except Exception as e: print(f\u0026#34;Error reconstructing all orders: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to reconstruct orders\u0026#39;}) def handle_validate_reconstruction(body): \u0026#34;\u0026#34;\u0026#34;Validate reconstruction by comparing with current read model\u0026#34;\u0026#34;\u0026#34; order_id = body.get(\u0026#39;orderId\u0026#39;) if not order_id: return build_response(400, {\u0026#39;error\u0026#39;: \u0026#39;orderId is required\u0026#39;}) try: # Get current read model state current_state = order_table.get_item(Key={\u0026#39;orderId\u0026#39;: order_id}).get(\u0026#39;Item\u0026#39;) # Get reconstructed state from events events = get_events_for_order(order_id) reconstructed_state = reconstruct_order_state(events) # Compare states validation_result = compare_states(current_state, reconstructed_state) return build_response(200, { \u0026#39;orderId\u0026#39;: order_id, \u0026#39;isValid\u0026#39;: validation_result[\u0026#39;isValid\u0026#39;], \u0026#39;differences\u0026#39;: validation_result[\u0026#39;differences\u0026#39;], \u0026#39;currentState\u0026#39;: current_state, \u0026#39;reconstructedState\u0026#39;: reconstructed_state }) except Exception as e: print(f\u0026#34;Error validating reconstruction: {str(e)}\u0026#34;) return build_response(500, {\u0026#39;error\u0026#39;: \u0026#39;Failed to validate reconstruction\u0026#39;}) def get_events_for_order(order_id): \u0026#34;\u0026#34;\u0026#34;Get all events for a specific order, sorted by timestamp\u0026#34;\u0026#34;\u0026#34; try: response = event_store_table.query( IndexName=\u0026#39;AggregateIndex\u0026#39;, # Assuming GSI on aggregateId KeyConditionExpression=Key(\u0026#39;aggregateId\u0026#39;).eq(order_id), ScanIndexForward=True # Sort by timestamp ascending ) events = response.get(\u0026#39;Items\u0026#39;, []) # Sort by timestamp to ensure correct order events.sort(key=lambda x: x.get(\u0026#39;timestamp\u0026#39;, \u0026#39;\u0026#39;)) return events except Exception as e: print(f\u0026#34;Error getting events for order {order_id}: {str(e)}\u0026#34;) # Fallback to scan if GSI doesn\u0026#39;t exist response = event_store_table.scan( FilterExpression=Key(\u0026#39;aggregateId\u0026#39;).eq(order_id) ) events = response.get(\u0026#39;Items\u0026#39;, []) events.sort(key=lambda x: x.get(\u0026#39;timestamp\u0026#39;, \u0026#39;\u0026#39;)) return events def reconstruct_order_state(events): \u0026#34;\u0026#34;\u0026#34;Reconstruct order state by replaying events\u0026#34;\u0026#34;\u0026#34; state = { \u0026#39;orderId\u0026#39;: None, \u0026#39;status\u0026#39;: None, \u0026#39;customerName\u0026#39;: None, \u0026#39;customerPhone\u0026#39;: None, \u0026#39;customerAddress\u0026#39;: None, \u0026#39;items\u0026#39;: [], \u0026#39;totalAmount\u0026#39;: Decimal(\u0026#39;0\u0026#39;), \u0026#39;createdAt\u0026#39;: None, \u0026#39;updatedAt\u0026#39;: None, \u0026#39;confirmedAt\u0026#39;: None, \u0026#39;cancelledAt\u0026#39;: None, \u0026#39;cancelReason\u0026#39;: None, \u0026#39;estimatedDelivery\u0026#39;: None, \u0026#39;eventHistory\u0026#39;: [] } for event in events: event_type = event.get(\u0026#39;eventType\u0026#39;) event_data = event.get(\u0026#39;eventData\u0026#39;, {}) timestamp = event.get(\u0026#39;timestamp\u0026#39;) # Track event history state[\u0026#39;eventHistory\u0026#39;].append({ \u0026#39;eventType\u0026#39;: event_type, \u0026#39;timestamp\u0026#39;: timestamp, \u0026#39;eventId\u0026#39;: event.get(\u0026#39;eventId\u0026#39;) }) if event_type == \u0026#39;OrderPlaced\u0026#39;: state[\u0026#39;orderId\u0026#39;] = event_data.get(\u0026#39;orderId\u0026#39;) state[\u0026#39;customerName\u0026#39;] = event_data.get(\u0026#39;customerName\u0026#39;) state[\u0026#39;customerPhone\u0026#39;] = event_data.get(\u0026#39;customerPhone\u0026#39;) state[\u0026#39;customerAddress\u0026#39;] = event_data.get(\u0026#39;customerAddress\u0026#39;) state[\u0026#39;items\u0026#39;] = event_data.get(\u0026#39;items\u0026#39;, []) state[\u0026#39;totalAmount\u0026#39;] = Decimal(str(event_data.get(\u0026#39;totalAmount\u0026#39;, 0))) state[\u0026#39;status\u0026#39;] = \u0026#39;PLACED\u0026#39; state[\u0026#39;createdAt\u0026#39;] = timestamp state[\u0026#39;updatedAt\u0026#39;] = timestamp elif event_type == \u0026#39;OrderConfirmed\u0026#39;: state[\u0026#39;status\u0026#39;] = \u0026#39;CONFIRMED\u0026#39; state[\u0026#39;confirmedAt\u0026#39;] = event_data.get(\u0026#39;confirmedAt\u0026#39;) state[\u0026#39;estimatedDelivery\u0026#39;] = event_data.get(\u0026#39;estimatedDelivery\u0026#39;) state[\u0026#39;updatedAt\u0026#39;] = timestamp elif event_type == \u0026#39;OrderCancelled\u0026#39;: state[\u0026#39;status\u0026#39;] = \u0026#39;CANCELLED\u0026#39; state[\u0026#39;cancelledAt\u0026#39;] = event_data.get(\u0026#39;cancelledAt\u0026#39;) state[\u0026#39;cancelReason\u0026#39;] = event_data.get(\u0026#39;reason\u0026#39;) state[\u0026#39;updatedAt\u0026#39;] = timestamp # Add more event types as needed return state def update_read_model(state): \u0026#34;\u0026#34;\u0026#34;Update the read model with reconstructed state\u0026#34;\u0026#34;\u0026#34; try: # Remove event history for read model read_model_state = {k: v for k, v in state.items() if k != \u0026#39;eventHistory\u0026#39;} order_table.put_item(Item=read_model_state) print(f\u0026#34;Updated read model for order {state[\u0026#39;orderId\u0026#39;]}\u0026#34;) except Exception as e: print(f\u0026#34;Error updating read model: {str(e)}\u0026#34;) raise def compare_states(current_state, reconstructed_state): \u0026#34;\u0026#34;\u0026#34;Compare current read model state with reconstructed state\u0026#34;\u0026#34;\u0026#34; differences = [] if not current_state: return { \u0026#39;isValid\u0026#39;: False, \u0026#39;differences\u0026#39;: [\u0026#39;Current state not found in read model\u0026#39;] } # Remove event history from comparison reconstructed_compare = {k: v for k, v in reconstructed_state.items() if k != \u0026#39;eventHistory\u0026#39;} # Compare key fields compare_fields = [\u0026#39;orderId\u0026#39;, \u0026#39;status\u0026#39;, \u0026#39;customerName\u0026#39;, \u0026#39;customerPhone\u0026#39;, \u0026#39;totalAmount\u0026#39;, \u0026#39;createdAt\u0026#39;, \u0026#39;confirmedAt\u0026#39;, \u0026#39;cancelledAt\u0026#39;] for field in compare_fields: current_value = current_state.get(field) reconstructed_value = reconstructed_compare.get(field) # Handle Decimal comparison if isinstance(current_value, Decimal) and isinstance(reconstructed_value, Decimal): if current_value != reconstructed_value: differences.append(f\u0026#34;{field}: current={current_value}, reconstructed={reconstructed_value}\u0026#34;) elif str(current_value) != str(reconstructed_value): differences.append(f\u0026#34;{field}: current={current_value}, reconstructed={reconstructed_value}\u0026#34;) return { \u0026#39;isValid\u0026#39;: len(differences) == 0, \u0026#39;differences\u0026#39;: differences } def build_response(status_code, body): return { \u0026#39;statusCode\u0026#39;: status_code, \u0026#39;headers\u0026#39;: { \u0026#39;Content-Type\u0026#39;: \u0026#39;application/json\u0026#39;, \u0026#39;Access-Control-Allow-Origin\u0026#39;: \u0026#39;*\u0026#39;, \u0026#39;Access-Control-Allow-Methods\u0026#39;: \u0026#39;GET, POST, PUT, DELETE, OPTIONS\u0026#39;, \u0026#39;Access-Control-Allow-Headers\u0026#39;: \u0026#39;Content-Type, Authorization\u0026#39; }, \u0026#39;body\u0026#39;: json.dumps(body, cls=DecimalEncoder, default=str) } Nh·∫•n Deploy ƒë·ªÉ l∆∞u m√£ h√†m.\n‚úÖ H√†m Lambda StateReconstructionHandler hi·ªán ƒë√£ s·∫µn s√†ng ƒë·ªÉ kh√¥i ph·ª•c tr·∫°ng th√°i ƒë∆°n h√†ng b·∫±ng c√°ch ph√°t l·∫°i c√°c s·ª± ki·ªán.\n"
},
{
	"uri": "/vi/3-eventstore/3.5-seed-data-menuitems/",
	"title": "Kh·ªüi t·∫°o d·ªØ li·ªáu cho MenuItems",
	"tags": [],
	"description": "",
	"content": "B∆∞·ªõc 1: M·ªü b·∫£ng MenuItems V√†o b·∫£ng MenuItems trong DynamoDB Console.\nNh·∫•p Explore table items.\nNh·∫•p Create item.\nB∆∞·ªõc 2: Th√™m m√≥n ƒÉn B√¢y gi·ªù, ch√∫ng ta s·∫Ω th√™m d·ªØ li·ªáu m·∫´u v√†o b·∫£ng MenuItems. M·ªói m√≥n ƒÉn s·∫Ω ƒë∆∞·ª£c th√™m th·ªß c√¥ng qua DynamoDB Console.\nPh∆∞∆°ng ph√°p n√†y ch·ªâ d√πng ƒë·ªÉ nhanh ch√≥ng th√™m d·ªØ li·ªáu m·∫´u ph·ª•c v·ª• m·ª•c ƒë√≠ch demo.\nTr√™n trang Create item, nh·∫•p JSON view ·ªü g√≥c tr√™n b√™n ph·∫£i ƒë·ªÉ chuy·ªÉn t·ª´ Form view sang ch·∫ø ƒë·ªô JSON.\nSao ch√©p v√† d√°n JSON c·ªßa t·ª´ng m√≥n ƒÉn b√™n d∆∞·ªõi v√†o tr√¨nh so·∫°n th·∫£o, sau ƒë√≥ nh·∫•n Create item ƒë·ªÉ l∆∞u. L·∫∑p l·∫°i quy tr√¨nh cho c·∫£ ba m√≥n. Item 1 - Pizza:\n{ \u0026#34;itemId\u0026#34;: \u0026#34;pizza-1\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Pizza Margherita\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Classic pizza with tomato sauce, mozzarella, and basil\u0026#34;, \u0026#34;price\u0026#34;: 12.99, \u0026#34;category\u0026#34;: \u0026#34;Pizza\u0026#34;, \u0026#34;available\u0026#34;: true, \u0026#34;image\u0026#34;: \u0026#34;https://digiticket.vn/blog/wp-content/uploads/2021/09/pizza-hut-5.jpg\u0026#34; } Item 2 - Burger:\n{ \u0026#34;itemId\u0026#34;: \u0026#34;burger-1\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Beef Burger\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Juicy beef patty with lettuce, tomato, and cheese\u0026#34;, \u0026#34;price\u0026#34;: 8.99, \u0026#34;category\u0026#34;: \u0026#34;Burger\u0026#34;, \u0026#34;available\u0026#34;: true, \u0026#34;image\u0026#34;: \u0026#34;https://i-kinhdoanh.vnecdn.net/2022/08/25/image001-9906-1661419989.jpg\u0026#34; } Item 3 - Drink:\n{ \u0026#34;itemId\u0026#34;: \u0026#34;drink-1\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Coca Cola\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Classic cola drink\u0026#34;, \u0026#34;price\u0026#34;: 2.99, \u0026#34;category\u0026#34;: \u0026#34;Drink\u0026#34;, \u0026#34;available\u0026#34;: true, \u0026#34;image\u0026#34;: \u0026#34;https://assets.xoimoc.com/responsive-images/md/products/cocacola.png\u0026#34; } Ch·∫ø ƒë·ªô JSON view gi√∫p nh·∫≠p li·ªáu h√†ng lo·∫°t nhanh h∆°n, trong khi Form view l·∫°i h·ªØu √≠ch khi mu·ªën ki·ªÉm tra tr·ª±c quan gi√° tr·ªã v√† ki·ªÉu d·ªØ li·ªáu.\nSau khi ƒë√£ t·∫°o xong c·∫£ ba m√≥n, quay l·∫°i Explore table items. L√∫c n√†y b·∫°n s·∫Ω th·∫•y b·∫£ng ƒë√£ ƒë∆∞·ª£c ƒëi·ªÅn d·ªØ li·ªáu m·∫´u: Mu·ªën tƒÉng t·ªëc khi th√™m nhi·ªÅu d·ªØ li·ªáu?\nThay v√¨ t·∫°o t·ª´ng b·∫£n ghi th·ªß c√¥ng trong console, b·∫°n c√≥ th·ªÉ d√πng BatchWriteItem API ho·∫∑c AWS CLI ƒë·ªÉ ch√®n nhi·ªÅu m·ª•c c√πng l√∫c.\n"
},
{
	"uri": "/vi/5-setupeventbridge/",
	"title": "Tri·ªÉn khai Pipeline EventBridge",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω thi·∫øt l·∫≠p h·∫° t·∫ßng EventBridge ƒë·ªÉ h·ªó tr·ª£ ki·∫øn tr√∫c Event Sourcing cho h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn nhanh.\nƒêi·ªÅu n√†y bao g·ªìm vi·ªác t·∫°o m·ªôt Custom Event Bus chuy√™n d·ª•ng ƒë·ªÉ thu th·∫≠p v√† ƒë·ªãnh tuy·∫øn t·∫•t c·∫£ c√°c s·ª± ki·ªán domain li√™n quan ƒë·∫øn ƒë∆°n h√†ng,\nnh∆∞ OrderPlaced, OrderConfirmed, v√† OrderCancelled.\nB·∫±ng c√°ch ƒë·ªãnh nghƒ©a c√°c Event Rule ch√≠nh x√°c, ch√∫ng ta ƒë·∫£m b·∫£o m·ªói s·ª± ki·ªán s·∫Ω ƒë∆∞·ª£c g·ª≠i ƒë·∫øn ƒë√∫ng h√†m Lambda\nch·ªãu tr√°ch nhi·ªám x·ª≠ l√Ω v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i h·ªá th·ªëng m·ªôt c√°ch b·∫•t ƒë·ªìng b·ªô.\nNgo√†i ra, ch√∫ng ta c≈©ng s·∫Ω t·∫°o m·ªôt SNS Topic ƒë·ªÉ ph√°t th√¥ng b√°o ƒë∆∞·ª£c k√≠ch ho·∫°t t·ª´ c√°c s·ª± ki·ªán n√†y.\nPipeline EventBridge l√† m·ªôt th√†nh ph·∫ßn quan tr·ªçng trong thi·∫øt k·∫ø Event Sourcing, gi√∫p h·ªá th·ªëng x·ª≠ l√Ω s·ª± ki·ªán m·ªôt c√°ch ƒë√°ng tin c·∫≠y, t√°ch bi·ªát\nv√† th·ªùi gian th·ª±c. ƒêi·ªÅu n√†y cho ph√©p h·ªá th·ªëng t√°i t·∫°o tr·∫°ng th√°i t·ª´ c√°c s·ª± ki·ªán v√† ph·∫£n h·ªìi nhanh ch√≥ng v·ªõi m·ªçi thay ƒë·ªïi.\nN·ªôi dung: 5.1 T·∫°o Custom Event Bus 5.1.1 C·∫•u h√¨nh EventBridge Rules 5.2 T·∫°o SNS Topic cho th√¥ng b√°o "
},
{
	"uri": "/vi/6-configapigateway/",
	"title": "C·∫•u h√¨nh API Gateway",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω c·∫•u h√¨nh Amazon API Gateway ƒë·ªÉ ƒë√≥ng vai tr√≤ \u0026ldquo;c·ªïng v√†o\u0026rdquo; cho h·ªá th·ªëng ƒë·∫∑t ƒë·ªì ƒÉn nhanh.\nAPI Gateway s·∫Ω ho·∫°t ƒë·ªông nh∆∞ m·ªôt giao di·ªán RESTful m√† client s·ª≠ d·ª•ng ƒë·ªÉ t∆∞∆°ng t√°c v·ªõi ki·∫øn tr√∫c Event Sourcing, cung c·∫•p quy·ªÅn truy c·∫≠p an to√†n v√† kh·∫£ nƒÉng m·ªü r·ªông t·ªõi c√°c Lambda function.\nCh√∫ng ta s·∫Ω t·∫°o m·ªõi m·ªôt API Gateway ƒë·ªÉ cung c·∫•p c√°c endpoint ph·ª•c v·ª• qu·∫£n l√Ω ƒë∆°n h√†ng, ch·∫≥ng h·∫°n nh∆∞ t·∫°o ƒë∆°n h√†ng, l·∫•y tr·∫°ng th√°i ƒë∆°n, v√† x·ª≠ l√Ω y√™u c·∫ßu t·ª´ kh√°ch h√†ng.\nAPI Gateway s·∫Ω t√≠ch h·ª£p li·ªÅn m·∫°ch v·ªõi c√°c Lambda function, t·ª´ ƒë√≥ g·ª≠i s·ª± ki·ªán v√†o pipeline EventBridge.\nNgo√†i ra, ch√∫ng ta s·∫Ω b·∫≠t Cross-Origin Resource Sharing (CORS) ƒë·ªÉ cho ph√©p c√°c ·ª©ng d·ª•ng web t·ª´ domain kh√°c t∆∞∆°ng t√°c v·ªõi API, ƒë·∫£m b·∫£o kh·∫£ nƒÉng t∆∞∆°ng th√≠ch v·ªõi c√°c chu·∫©n ph√°t tri·ªÉn web hi·ªán ƒë·∫°i.\nCu·ªëi c√πng, ch√∫ng ta s·∫Ω tri·ªÉn khai API ƒë·ªÉ c√≥ th·ªÉ truy c·∫≠p t·ª´ c√°c client b√™n ngo√†i.\nC·∫•u h√¨nh API Gateway n√†y r·∫•t quan tr·ªçng ƒë·ªÉ cung c·∫•p m·ªôt giao di·ªán RESTful r√µ r√†ng cho ki·∫øn tr√∫c h∆∞·ªõng s·ª± ki·ªán, gi√∫p client k√≠ch ho·∫°t c√°c domain event trong khi v·∫´n duy tr√¨ nguy√™n t·∫Øc t√°ch bi·ªát gi·ªØa t·∫ßng tr√¨nh b√†y v√† ph·∫ßn tri·ªÉn khai Event Sourcing.\nN·ªôi dung: 6.1 T·∫°o API Gateway m·ªõi 6.2 B·∫≠t CORS 6.3 Tri·ªÉn khai API "
},
{
	"uri": "/vi/7-deployfrontend/",
	"title": "Tri·ªÉn khai ·ª©ng d·ª•ng Frontend",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω chu·∫©n b·ªã v√† tri·ªÉn khai ·ª©ng d·ª•ng frontend cho H·ªá th·ªëng ƒê·∫∑t h√†ng FastFood. C√°c b∆∞·ªõc bao g·ªìm:\nC·∫•u h√¨nh c√°c bi·∫øn m√¥i tr∆∞·ªùng c·∫ßn thi·∫øt. X√¢y d·ª±ng m√£ ngu·ªìn frontend. Tri·ªÉn khai c√°c file ƒë√£ build l√™n bucket S3 ƒë·ªÉ l∆∞u tr·ªØ tƒ©nh. Thi·∫øt l·∫≠p Amazon CloudFront l√†m CDN ƒë·ªÉ ph√¢n ph·ªëi t√†i nguy√™n frontend m·ªôt c√°ch hi·ªáu qu·∫£ v√† b·∫£o m·∫≠t. C√°c ph·∫ßn ti·∫øp theo s·∫Ω h∆∞·ªõng d·∫´n b·∫°n t·ª´ng b∆∞·ªõc, t·ª´ thi·∫øt l·∫≠p m√¥i tr∆∞·ªùng ƒë·∫øn tri·ªÉn khai v√† c·∫•u h√¨nh CDN.\nN·ªôi dung: 7.1 T·∫°o bucket S3 7.2 T·∫£i frontend l√™n S3 7.3 T·∫°o CloudFront Distribution v√† √°p d·ª•ng cho website "
},
{
	"uri": "/vi/8-testing/",
	"title": "Ki·ªÉm th·ª≠ &amp; Gi√°m s√°t",
	"tags": [],
	"description": "",
	"content": "Trong ph·∫ßn n√†y, ch√∫ng ta s·∫Ω ki·ªÉm tra t√≠nh nƒÉng c·ªßa H·ªá th·ªëng ƒê·∫∑t h√†ng FastFood v√† tri·ªÉn khai c√°c gi·∫£i ph√°p gi√°m s√°t nh·∫±m ƒë·∫£m b·∫£o hi·ªáu su·∫•t t·ªëi ∆∞u. C√°c n·ªôi dung bao g·ªìm:\nTh·ª±c hi·ªán ki·ªÉm th·ª≠ to√†n di·ªán c·∫£ ph·∫ßn frontend v√† backend ƒë·ªÉ x√°c minh ch·ª©c nƒÉng h·ªá th·ªëng. Thi·∫øt l·∫≠p c√°c gi·∫£i ph√°p gi√°m s√°t v√† ghi log ƒë·ªÉ theo d√µi hi·ªáu su·∫•t ·ª©ng d·ª•ng, t∆∞∆°ng t√°c ng∆∞·ªùi d√πng v√† s·ª©c kh·ªèe h·ªá th·ªëng. C·∫•u h√¨nh c·∫£nh b√°o v√† b·∫£ng ƒëi·ªÅu khi·ªÉn (dashboard) ƒë·ªÉ ch·ªß ƒë·ªông ph√°t hi·ªán v√† x·ª≠ l√Ω s·ª± c·ªë. √Åp d·ª•ng c√°c ph∆∞∆°ng ph√°p th·ª±c h√†nh t·ªët nh·∫•t cho kh·∫£ nƒÉng quan s√°t ·ª©ng d·ª•ng trong m√¥i tr∆∞·ªùng ƒëi·ªán to√°n ƒë√°m m√¢y. C√°c ph·∫ßn d∆∞·ªõi ƒë√¢y s·∫Ω h∆∞·ªõng d·∫´n b·∫°n quy tr√¨nh ki·ªÉm th·ª≠ v√† thi·∫øt l·∫≠p gi√°m s√°t ƒë·ªÉ ƒë·∫£m b·∫£o H·ªá th·ªëng ƒê·∫∑t h√†ng FastFood ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v√† hi·ªáu qu·∫£.\nN·ªôi dung: 8.1 Ki·ªÉm th·ª≠ ·ª©ng d·ª•ng 8.2 Gi√°m s√°t "
},
{
	"uri": "/vi/9-cleanup/",
	"title": "D·ªçn d·∫πp t√†i nguy√™n",
	"tags": [],
	"description": "",
	"content": "Ch√∫ng ta s·∫Ω th·ª±c hi·ªán c√°c b∆∞·ªõc sau ƒë·ªÉ x√≥a c√°c t√†i nguy√™n ƒë√£ t·∫°o trong workshop n√†y.\nX√≥a nh√≥m Log CloudWatch Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• CloudWatch Nh·∫•p v√†o Logs ·ªü thanh b√™n tr√°i.\nNh·∫•p v√†o Log groups.\nCh·ªçn c√°c nh√≥m log m√† ch√∫ng ta ƒë√£ t·∫°o cho b√†i lab n√†y:\n/aws/lambda/OrderCommandHandler /aws/lambda/OrderEventProcessor /aws/lambda/OrderQueryHandler /aws/lambda/StateReconstructionHandler Nh·∫•p Actions.\nNh·∫•p Delete log group(s).\nTrong h·ªôp tho·∫°i x√°c nh·∫≠n, nh·∫•p Delete ƒë·ªÉ x√°c nh·∫≠n x√≥a.\nX√≥a API Gateway Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• API Gateway\nNh·∫•p APIs ·ªü thanh b√™n tr√°i. Ch·ªçn API FastFoodOrderAPI. Nh·∫•p Actions. Nh·∫•p Delete. G√µ confirm v√†o √¥ x√°c nh·∫≠n. Nh·∫•p Delete ƒë·ªÉ x√≥a API vƒ©nh vi·ªÖn. X√≥a CloudFront Distribution Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• CloudFront\nNh·∫•p Distributions ·ªü thanh b√™n tr√°i. Ch·ªçn distribution m√† ch√∫ng ta ƒë√£ t·∫°o (ID: E2GXEUIB6RGU9). Nh·∫•p Disable. Ch·ªù tr·∫°ng th√°i distribution chuy·ªÉn th√†nh Disabled. Ch·ªçn distribution ƒë√£ Disabled. Nh·∫•p Delete. Nh·∫•p Delete ƒë·ªÉ x√°c nh·∫≠n x√≥a. X√≥a Bucket v√† c√°c ƒë·ªëi t∆∞·ª£ng trong S3 Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• S3\nNh·∫•p v√†o bucket S3 c√≥ t√™n event-sourcing-fastfood-frontend. Nh·∫•p Empty. G√µ permanently delete v√†o √¥ x√°c nh·∫≠n. Nh·∫•p Empty ƒë·ªÉ x√≥a t·∫•t c·∫£ ƒë·ªëi t∆∞·ª£ng trong bucket. Nh·∫•p Exit. Sau khi ƒë√£ x√≥a h·∫øt ƒë·ªëi t∆∞·ª£ng trong bucket:\nCh·ªçn bucket event-sourcing-fastfood-frontend. Nh·∫•p Delete. G√µ t√™n bucket event-sourcing-fastfood-frontend v√†o √¥ x√°c nh·∫≠n. Nh·∫•p Delete bucket ƒë·ªÉ x√≥a bucket vƒ©nh vi·ªÖn. X√≥a b·∫£ng DynamoDB Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• DynamoDB\nNh·∫•p Tables ·ªü thanh b√™n tr√°i.\nCh·ªçn t·∫•t c·∫£ b·∫£ng m√† ch√∫ng ta ƒë√£ t·∫°o:\nCustomerReadModel EventStore MenuItems OrderReadModel Nh·∫•p Actions.\nNh·∫•p Delete.\nTrong h·ªôp tho·∫°i x√°c nh·∫≠n, g√µ confirm v√†o √¥ nh·∫≠p.\nNh·∫•p Delete ƒë·ªÉ x√≥a c√°c b·∫£ng vƒ©nh vi·ªÖn.\nX√≥a topic SNS Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• SNS\nNh·∫•p Topics ·ªü thanh b√™n tr√°i. Ch·ªçn topic OrderNotifications. Nh·∫•p Delete. Trong h·ªôp tho·∫°i x√°c nh·∫≠n, g√µ delete me v√†o √¥ nh·∫≠p. Nh·∫•p Delete ƒë·ªÉ x√°c nh·∫≠n x√≥a. X√≥a t√†i nguy√™n EventBridge Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• EventBridge\nNh·∫•p Event buses ·ªü thanh b√™n tr√°i. Ch·ªçn event bus t√πy ch·ªânh FastFoodOrderBus. Nh·∫•p Delete. Trong h·ªôp tho·∫°i x√°c nh·∫≠n, g√µ delete v√†o √¥ nh·∫≠p. Nh·∫•p Delete ƒë·ªÉ x√°c nh·∫≠n x√≥a. V·∫´n trong b·∫£ng ƒëi·ªÅu khi·ªÉn EventBridge:\nNh·∫•p Rules ·ªü thanh b√™n tr√°i.\nCh·ªçn c√°c rule ch√∫ng ta ƒë√£ t·∫°o:\nOrderEventProcessingRule StateReconstructionRule Nh·∫•p Delete.\nG√µ delete v√†o √¥ x√°c nh·∫≠n.\nNh·∫•p Delete ƒë·ªÉ x√°c nh·∫≠n x√≥a.\nX√≥a c√°c h√†m Lambda Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• Lambda\nNh·∫•p Functions ·ªü thanh b√™n tr√°i.\nCh·ªçn t·∫•t c·∫£ c√°c h√†m ch√∫ng ta ƒë√£ t·∫°o:\nOrderCommandHandler OrderEventProcessor StateReconstructionHandler OrderQueryHandler Nh·∫•p Actions.\nNh·∫•p Delete.\nTrong h·ªôp tho·∫°i x√°c nh·∫≠n, g√µ confirm v√†o √¥ nh·∫≠p.\nNh·∫•p Delete ƒë·ªÉ x√≥a c√°c h√†m vƒ©nh vi·ªÖn.\nX√≥a IAM Role Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn d·ªãch v·ª• IAM\nNh·∫•p Roles ·ªü thanh b√™n tr√°i. T√¨m ki·∫øm role EventSourcingLambdaRole. Nh·∫•p ƒë·ªÉ ch·ªçn role. Nh·∫•p Delete. Nh·∫≠p t√™n role EventSourcingLambdaRole v√†o √¥ x√°c nh·∫≠n. Nh·∫•p Delete ƒë·ªÉ x√°c nh·∫≠n x√≥a. "
},
{
	"uri": "/vi/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/vi/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]